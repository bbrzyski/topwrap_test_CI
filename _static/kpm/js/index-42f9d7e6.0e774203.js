"use strict";(self.webpackChunkpipeline_manager=self.webpackChunkpipeline_manager||[]).push([[955],{46550:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(66252);const o={id:"app"},i={},s=(0,n(83744).Z)(i,[["render",function(e,t){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(n)])}]])},1309:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(66252),o=n(49963),i=n(3577),s=n(2262),r=n(3823),l=n(62902);const c=(0,a.aZ)({props:{position:{type:Object,required:!0},rightclickCallback:{required:!0,type:Function}},setup(e){const{graph:t}=(0,r.n4)(),{viewModel:n}=(0,r.Dz)(),o=(0,a.Fl)((()=>({cx:(e.position.x+t.value.panning.x)*t.value.scaling+"px",cy:(e.position.y+t.value.panning.y)*t.value.scaling+"px",r:7.5*t.value.scaling+"px"}))),i=(0,l.Z)((0,s.iH)(e.position)),c=()=>{i.onPointerUp(),document.removeEventListener("pointermove",i.onPointerMove),document.removeEventListener("pointerup",c)};return{styles:o,startDrag:e=>{n.value.editor.readonly||(i.onPointerDown(e),document.addEventListener("pointermove",i.onPointerMove),document.addEventListener("pointerup",c))}}}}),d=(0,n(83744).Z)(c,[["render",function(e,t,n,s,r,l){return(0,a.wg)(),(0,a.iD)("g",{onPointerdown:[t[0]||(t[0]=(0,o.iM)(((...t)=>e.startDrag&&e.startDrag(...t)),["left"])),t[1]||(t[1]=(0,o.iM)(((...t)=>e.rightclickCallback&&e.rightclickCallback(...t)),["right","exact"]))],class:"anchor"},[(0,a._)("circle",{style:(0,i.j5)(e.styles)},null,4)],32)}]])},27215:(e,t,n)=>{n.d(t,{Z:()=>ct});var a=n(66252),o=n(49963);const i={id:"container"};var s=n(2262),r=n(3577);const l=e=>((0,a.dD)("data-v-45b20100"),e=e(),(0,a.Cn)(),e),c={class:"wrapper"},d={class:"container"},u={class:"dropdown-wrapper"},p=l((()=>(0,a._)("hr",null,null,-1))),v=l((()=>(0,a._)("hr",null,null,-1))),h=l((()=>(0,a._)("hr",null,null,-1))),g=l((()=>(0,a._)("hr",null,null,-1))),m={key:0},f={key:1},w=["id","onClick","onPointerover","onPointerleave"],b=l((()=>(0,a._)("div",{class:"progress-bar"},null,-1))),y=[l((()=>(0,a._)("span",null,"Return from subgraph editor",-1)))],C={key:0},k={key:1},_={key:0},S={key:1},N={key:0},I={key:1},M=[l((()=>(0,a._)("span",null,"Backend status",-1)))],x={class:"backend-status"},P=l((()=>(0,a._)("span",null,"Client status:",-1))),H={key:0,class:"connected"},D={key:1,class:"disconnected"},A=[l((()=>(0,a._)("span",null,"Hide notifications",-1)))],F=[l((()=>(0,a._)("span",null,"Show notifications",-1)))],O=l((()=>(0,a._)("div",{class:"progress-bar"},null,-1)));var T=n(46293),Z=n(31819),L=n.n(Z),E=n(3823),W=n(48651),q=n(43338),R=n(53742),V=n(31253),j=n(93361),B=n(35308),$=n(43432),U=n(63564),z=n(97889),G=n(12537),Y=n(28060);const Q=["for"],K=["id"],J=["id","value"],X={props:{text:{type:String,required:!0},id:{type:String},type:{type:String,default:"file"},eventFunction:{type:Function,required:!0}}};var ee=n(83744);const te=(0,ee.Z)(X,[["render",function(e,t,n,o,i,s){return(0,a.wg)(),(0,a.iD)("div",null,["file"===n.type?((0,a.wg)(),(0,a.iD)("label",{key:0,for:n.id},(0,r.zw)(n.text),9,Q)):(0,a.kq)("",!0),"file"===n.type?((0,a.wg)(),(0,a.iD)("input",{key:1,id:n.id,type:"file",onChange:t[0]||(t[0]=(...e)=>n.eventFunction&&n.eventFunction(...e))},null,40,K)):((0,a.wg)(),(0,a.iD)("input",{key:2,id:n.id,type:"button",onClick:t[1]||(t[1]=(...e)=>n.eventFunction&&n.eventFunction(...e)),value:n.text},null,8,J))])}],["__scopeId","data-v-74c292ef"]]);var ne=n(48650),ae=n(29549),oe=n(20196),ie=n(46174),se=n(85950),re=n(42298),le=n(5754);const ce={class:"notifications"},de={class:"info"},ue={class:"panel"};var pe=n(81904),ve=n(48525);const he={components:{Cross:pe.Z,Notification:ve.Z},computed:{notifications:()=>se.Rb.notifications,notificationsLength:()=>se.Rb.notifications.length},data:()=>({notificationStore:se.Rb}),methods:{removeAll(){se.Rb.remove()}}},ge=(0,ee.Z)(he,[["render",function(e,t,n,o,i,s){const l=(0,a.up)("Cross"),c=(0,a.up)("Notification");return(0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("div",de,[(0,a._)("span",null,"Notifications ("+(0,r.zw)(i.notificationStore.notifications.length)+")",1),(0,a._)("button",{onClick:t[0]||(t[0]=(...e)=>this.removeAll&&this.removeAll(...e)),tabindex:"-1"},[(0,a.Wm)(l),(0,a.Uk)(" Clear all ")])]),(0,a._)("div",ue,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.notificationsLength,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a.Wm)(c,{type:s.notifications[s.notificationsLength-e].type,message:`${s.notifications[s.notificationsLength-e].message}`,index:s.notificationsLength-e,border:"border"},null,8,["type","message","index"])])))),128))])])])}],["__scopeId","data-v-fd15cad8"]]),me={class:"settings-panel"},fe=(0,a._)("div",{class:"setting-header"},[(0,a._)("span",null,"Settings")],-1),we={class:"panel"},be={class:"option-label"},ye={class:"__properties"},Ce=(0,a._)("div",{class:"option-label"},"Hide Layers:",-1);var ke=n(90779);const _e={props:{viewModel:{required:!0}},setup(e){const t=(0,le.Z)(),n=(e,n)=>{t.notifyAboutChange("metadata_on_change",{metadata:{[e]:n}})},o=(0,a.Fl)((()=>{const t=new E.RM("Connection style",e.viewModel.connectionRenderer.style,[{text:"Curved",value:"curved"},{text:"Orthogonal",value:"orthogonal"}]).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.connectionRenderer.style=t,n("connectionStyle",t)})),t.componentName="SelectInterface",t})),i=(0,a.Fl)((()=>{const t=new E.Ud("Randomized offset",e.viewModel.connectionRenderer.randomizedOffset).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.connectionRenderer.randomizedOffset=t,n("randomizedOffset",t)})),t.componentName="CheckboxInterface",t})),r=(0,a.Fl)((()=>{const t=new E.Ac("Background grid size",e.viewModel.settings.background.gridSize).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.background.gridSize=t,n("backgroundSize",t)})),t.componentName="IntegerInterface",t})),l=(0,a.Fl)((()=>{const t=new E.Ac("Node movement step",e.viewModel.movementStep).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.movementStep=t,n("movementStep",t)})),t.componentName="IntegerInterface",t})),c=(0,a.Fl)((()=>{const{layoutManager:t}=e.viewModel.editor,a=t.getAvailableAlgorithms().map((e=>({text:e,value:e}))),o=new E.RM("Autolayout algorithm",t.usedAlgorithm,a).setPort(!1);return o.events.setValue.subscribe(this,(e=>{t.useAlgorithm(e),n("layout",e)})),o.componentName="SelectInterface",o})),d=(0,a.Fl)((()=>{const t=new E.Sd("Apply autolayout",(()=>{e.viewModel.editor.applyAutolayout()}));return t.componentName="ButtonInterface",t})),u=(0,a.Fl)((()=>{const n=new E.Sd("Center",(()=>{e.viewModel.editor.centerZoom(),t.notifyAboutChange("viewport_on_center")}));return n.componentName="ButtonInterface",n})),p=(0,a.Fl)((()=>{const t=new E.Sd("Clean editor",(()=>{e.viewModel.editor.deepCleanEditor()}));return t.componentName="ButtonInterface",t})),v=(0,a.Fl)((()=>{const t=(0,s.iH)([]);return e.viewModel.layers.forEach((n=>{const a=new E.Ud(n.name,!1).setPort(!1);a.events.setValue.subscribe(this,(()=>{e.viewModel.ignoredLayers.has(n.name)?e.viewModel.ignoredLayers.delete(n.name):e.viewModel.ignoredLayers.add(n.name)})),a.componentName="CheckboxInterface",t.value.push(a)})),t.value})),h=(0,a.Fl)((()=>{const t=new E.RM("Verbosity of notifications",e.viewModel.logLevel,Object.keys(ie.p).map((e=>e.toUpperCase()))).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.logLevel=t})),t.componentName="SelectInterface",t})),g=(0,a.Fl)((()=>e.viewModel.editor.readonly?[]:[h.value,o.value,c.value,d.value,r.value,p.value,l.value,i.value])),m=(0,a.Fl)((()=>[u.value].concat(g.value)));return{getOptionName:ke.Dx,settingOptions:m,disableLayersOptions:v}}},Se=(0,ee.Z)(_e,[["render",function(e,t,n,i,s,l){return(0,a.wg)(),(0,a.iD)("div",me,[fe,(0,a._)("div",we,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.settingOptions,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("div",be,(0,r.zw)(i.getOptionName(e)?`${e.name}:`:""),1),((0,a.wg)(),(0,a.j4)((0,a.LL)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128)),(0,a.wy)((0,a._)("div",ye,[Ce,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.disableLayersOptions,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128))],512),[[o.F8,0!==i.disableLayersOptions.length]])])])}]]),Ne={class:"popup-menu"},Ie={class:"__header"},Me=(0,a._)("div",{class:"__header-title"}," Save configuration ",-1);var xe=n(66319),Pe=n(52364);const He=(0,a.aZ)({props:{modelValue:{type:Boolean,default:!1},viewModel:{required:!0,type:Object},saveConfiguration:{required:!0,type:Object}},components:{Cross:pe.Z},emits:["update:modelValue"],setup(e,{emit:t}){const n=(0,a.Fl)((()=>{if(void 0===e.saveConfiguration.readonly)return;const t=new E.Ud("Make graph read only",e.saveConfiguration.readonly).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.saveConfiguration.readonly=t})),t.componentName="CheckboxInterface",t})),o=(0,a.Fl)((()=>{if(void 0===e.saveConfiguration.hideHud)return;const t=new E.Ud("Disable HUD",e.saveConfiguration.hideHud).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.saveConfiguration.hideHud=t})),t.componentName="CheckboxInterface",t})),i=(0,a.Fl)((()=>{if(void 0===e.saveConfiguration.position)return;const t=new E.Ud("Preserve current view location",e.saveConfiguration.position).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.saveConfiguration.position=t})),t.componentName="CheckboxInterface",t})),r=(0,a.Fl)((()=>{const e=new xe.Z("File name","save").setPort(!1);return e.componentName="InputInterface",e.setComponent((0,s.Xl)(Pe.Z)),e})),l=()=>{e.modelValue&&t("update:modelValue",!1)},c=(0,a.Fl)((()=>{const t=new E.Sd("Save",(()=>{e.saveConfiguration.saveCallback(),l()}));return t.componentName="ButtonInterface",t}));return{additionalOptions:(0,a.Fl)((()=>{const e=[];return[n,o,i].forEach((t=>{void 0!==t.value&&e.push(t.value)})),e})),dataflowname:r,save:c,close:l}}}),De=(0,ee.Z)(He,[["render",function(e,t,n,o,i,s){const r=(0,a.up)("Cross");return(0,a.wg)(),(0,a.iD)("div",Ne,[(0,a._)("div",Ie,[Me,(0,a.Wm)(r,{tabindex:"-1",class:"__close",onClick:e.close},null,8,["onClick"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.additionalOptions,(e=>((0,a.wg)(),(0,a.j4)((0,a.LL)(e.component),{key:e.id,intf:e},null,8,["intf"])))),128)),(0,a.Uk)(" File name: "),((0,a.wg)(),(0,a.j4)((0,a.LL)(e.dataflowname.component),{intf:e.dataflowname,class:"__name-option",modelValue:e.saveConfiguration.saveName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.saveConfiguration.saveName=t)},null,8,["intf","modelValue"])),((0,a.wg)(),(0,a.j4)((0,a.LL)(e.save.component),{intf:e.save},null,8,["intf"]))])}]]),Ae={class:"blur-panel"},Fe={},Oe=(0,ee.Z)(Fe,[["render",function(e,t){return(0,a.wg)(),(0,a.iD)("div",Ae,[(0,a.WI)(e.$slots,"default")])}]]);var Te=n(35732);const Ze=(e,t)=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t,n.click()},Le={saveName:"specification",saveCallback(){const e=new Blob([JSON.stringify(oe.ZP.getEditorManagerInstance().saveSpecification(),null,4)],{type:"application/json"});Ze(e,this.saveName),ie.Z.showToast("info","Specification saved")},reset(){this.saveName="specification"}},Ee={readonly:!1,hideHud:!1,position:!1,saveName:"save",saveCallback(){const e=new Blob([JSON.stringify(oe.ZP.getEditorManagerInstance().saveDataflow(this.readonly,this.hideHud,this.position),null,4)],{type:"application/json"});Ze(e,this.saveName),ie.Z.showToast("info","Dataflow saved")},saveCallbackCustomFormat(e){const t=document.createElement("a");let n;"string"==typeof e?(n="application/octet-stream",t.href=`data:${n};base64,${e}`):(n="application/json",t.href=window.URL.createObjectURL(new Blob([JSON.stringify(e)],{type:n}))),t.download=this.saveName,t.click(),ie.Z.showToast("info",`File saved successfully: ${this.saveName}`)},reset(){this.readonly=!1,this.hideHud=!1,this.position=!1,this.saveName="save"}};var We=n(42159),qe=n(79359),Re=n(120);const Ve={components:{Logo:q.Z,Arrow:R.Z,Run:B.Z,CassetteStop:Y.Z,Validate:$.Z,Backend:U.Z,Bell:z.Z,DropdownItem:te,Expand:V.Z,Collapse:j.Z,Notifications:ge,Magnifier:ae.Z,Cogwheel:ne.Z,Settings:Se,Cube:G.Z,SaveMenu:De,BlurPanel:Oe,CustomSidebar:Te.Z},computed:{dataflowGraphName(){return this.editorManager.editor.graphName},editorTitle(){if(void 0===this.graphName)return this.appName;const e=this.graphName.trim();return""===e?this.appName:e},preview(){const e=new URLSearchParams(window.location.search);return!!e.has("preview")&&"true"===e.get("preview")},hideHud(){return this.editorManager.editor.hideHud},readonly(){return this.editorManager.editor.readonly},settingsOpen(){return this.panels.settings.isOpen},notificationsOpen(){return this.panels.notifications.isOpen},paletteOpen(){return this.panels.palette.isOpen},backendStatusOpen(){return this.panels.backendStatus.isOpen},notificationsTooltipClasses(){return{last:!this.hideHud}},backendStatusTooltipClasses(){return{last:this.hideHud&&this.externalApplicationManager.backendAvailable}},settingsTooltipClasses(){return{last:this.hideHud&&!this.externalApplicationManager.backendAvailable}},navbarItems(){const{navbarItems:e}=this.editorManager.baklavaView;return e.forEach((e=>{void 0===We.Z[e.iconName]?(e.icon=(0,s.Xl)(We.Z.Placeholder),e.iconName=this.editorManager.baklavaView.cache[`./${e.iconName}`]):e.icon=(0,s.Xl)(We.Z[e.iconName])})),e},leftButtonsQuantity(){return 2+(this.externalApplicationManager.backendAvailable?this.navbarItems.length:0)+(this.editorManager.editor.isInSubgraph()?1:0)},rightButtonsQuantity(){return 3+(this.externalApplicationManager.backendAvailable?1:0)},isNavBarCompressed(){return this.isMounted&&this.windowWidth<(this.leftButtonsQuantity+this.rightButtonsQuantity)*this.buttonWidth+this.searchbarWidthMultiplcity*this.buttonWidth+.5*this.buttonWidth},mobileClasses(){return{"compressed-mobile":this.isNavBarCompressed}},nodesearchInputStyles(){return{width:this.searchbarWidthMultiplcity*this.buttonWidth+"px"}},leftContainerStyles(){return this.isNavBarCompressed?{"flex-grow":this.leftButtonsQuantity}:{}},rightContainerStyles(){return this.isNavBarCompressed?{"flex-grow":this.rightButtonsQuantity,"justify-content":"right"}:{"justify-content":"right"}},activeNavbarItems(){return this.activeNavbarItemsNames}},watch:{dataflowGraphName(e){this.graphName=e,Le.reset(),Ee.reset()},graphName(e){this.editorManager.updateSubgraphName(e),Le.reset(),Ee.reset()},searchEditorNodesQuery(e){const{viewModel:t}=(0,E.Dz)();t.value.editor.searchQuery=""!==e?e.toLowerCase():void 0},navbarItems(e){this.activeNavbarItemsNames=e.map((e=>e.procedureName))}},data(){const e=oe.ZP.getEditorManagerInstance(),t=e.baklavaView.editor.graphName??"",n={NODE_ENV:"production",VUE_APP_STATIC:"true",VUE_APP_VERBOSE:"false",VUE_APP_GRAPH_DEVELOPMENT_MODE:"false",BASE_URL:""}.VUE_APP_EDITOR_TITLE??"Pipeline Manager",o=new xe.Z("Graph name","").setPort(!1);o.componentName="InputInterface",o.setComponent((0,s.Xl)(Pe.Z));const i=(0,s.iH)("");return re.Z.setHook(this.updateActiveNavbarItems),(0,a.JJ)("hoveredOver",(()=>{})),{appName:n,graphName:t,editorManager:e,editorTitleInterface:o,externalApplicationManager:(0,le.Z)(),activeNavbarItemsNames:[],saveConfiguration:Ee,saveGraphConfiguration:Ee,saveSpecificationConfiguration:Le,saveMenuShow:!1,editTitle:!1,notificationStore:se.Rb,showSearch:!1,crossIcon:(0,s.Xl)(We.Z.Cross),searchEditorNodesQuery:i,navbarGuard:!1,isMounted:!1,windowWidth:0,buttonWidth:0,searchbarWidthMultiplcity:4,hoverInfo:{isHovered:!1,hoveredPanel:void 0},panels:{notifications:{isOpen:!1,class:".notifications",iconRef:"notifications",showTransform:"-495px, 0px",hideTransform:"0px, 0px"},palette:{isOpen:!this.$isMobile,class:".baklava-node-palette",iconRef:"palette",showTransform:"0px, 0px",hideTransform:"-450px, 0px"},backendStatus:{isOpen:!1,class:".backend-status",iconRef:"backend",showTransform:"-89%, 0px",hideTransform:"-89%, -180px"},settings:{isOpen:!1,class:".settings-panel",iconRef:"settings",showTransform:"-495px, 0px",hideTransform:"0px, 0px"},nodesearch:{isOpen:!1},fullscreen:{isOpen:W.api.isFullscreen}}}},methods:{loadSpecification(e){const t=oe.ZP.validateSpecification(e);Array.isArray(t)&&t.length?ie.Z.terminalLog("error","Specification is invalid",t):this.editorManager.updateEditorSpecification(e).then((({errors:e,warnings:t})=>{Array.isArray(t)&&t.length&&ie.Z.terminalLog("warning","Issue when loading specification",t),Array.isArray(e)&&e.length&&ie.Z.terminalLog("error","Specification is invalid",e)}))},createNewGraphCallback(){(0,Re.Yr)(),this.editorManager.editor.deepCleanEditor(!1),(0,Re._c)()},loadSpecificationCallback(){const e=document.getElementById("load-spec-button").files[0];if(!e)return;const t=new FileReader;t.onload=()=>{this.loadSpecification(t.result)},t.readAsText(e),document.getElementById("load-spec-button").value=""},togglePanel(e,t=!1){const n=document.querySelector(e.class),a=this.$refs[e.iconRef];e.isOpen=!t&&!e.isOpen;const o=e.isOpen;n&&(n.style.transition=`transform ${o?"0.4":"0.2"}s`,n.style.transform=`translate(${o?e.showTransform:e.hideTransform})`,a.classList.toggle("open",o))},toggleFullscreen(){W.api.isEnabled?W.api.toggle():ie.Z.showToast("error","Fullscreen is not supported")},clickOutside(e,t){const n=this.$refs[t.iconRef];if(!n)return;const a=e.target;a instanceof Node&&(n.contains(a)||n===a)||this.togglePanel(t,!0)},loadDataflow(e){this.editorManager.loadDataflow(e).then((({errors:e,warnings:t})=>{if(Array.isArray(t)&&t.length&&ie.Z.terminalLog("warning","Issue when loading dataflow",t),Array.isArray(e)&&e.length){const t="Dataflow is invalid";ie.Z.terminalLog("error",t,e)}}))},loadDataflowCallback(){const e=document.getElementById("load-dataflow-button").files[0];if(!e)return;const t=new FileReader;t.onload=async()=>{let e=null;try{e=L().parse(t.result)}catch(e){return void(e instanceof SyntaxError?ie.Z.terminalLog("error","Not a proper JSON file",e.toString()):ie.Z.terminalLog("error","Unknown error",e.toString()))}await this.externalApplicationManager.notifyAboutChange("graph_on_change",{dataflow:e}),this.loadDataflow(e)},t.readAsText(e),document.getElementById("load-dataflow-button").value=""},async requestDataflowAction(e){if(!this.externalApplicationManager.backendAvailable)return;if(this.isInProgress(e.procedureName)&&this.isStoppable(e.procedureName))return void await this.externalApplicationManager.requestDataflowStop(e.procedureName);const t=this.activeNavbarItemsNames.includes(e.procedureName);t&&!this.isInProgress(e.procedureName)?await this.externalApplicationManager.requestDataflowAction(e.procedureName):t&&ie.Z.terminalLog("warning",`${e.name} cannot be stopped`)},async requestDataflowExport(e=!0){if(!this.externalApplicationManager.backendAvailable)return;const t=await this.externalApplicationManager.requestDataflowExport();!1!==t&&(this.saveConfiguration={...Ee},this.saveConfiguration.saveName=t.filename??Ee.saveName,e?(this.saveConfiguration.readonly=void 0,this.saveConfiguration.hideHud=void 0,this.saveConfiguration.position=void 0,this.saveConfiguration.saveCallback=()=>{this.saveConfiguration.saveCallbackCustomFormat(t.content),this.saveConfiguration=Ee},this.saveMenuShow=!0):this.saveConfiguration.saveCallbackCustomFormat(t.content))},importDataflow(){if(!this.externalApplicationManager.backendAvailable)return;const e=document.getElementById("request-dataflow-button").files[0];if(!e)return;const t=new FileReader;t.onload=async()=>{await this.externalApplicationManager.importDataflow(t.result)},t.readAsText(e)},exportToPng(){const e=document.querySelector(".inner-editor");(0,T.YM)(e,{filter:e=>!e.classList?.contains("baklava-node-palette"),imagePlaceholder:qe.h}).then((e=>{const t=document.createElement("a");t.download="dataflow.png",t.href=e,t.dataset.downloadurl=[e,t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{ie.Z.showToast("error",`Export to PNG failed: ${e}`)}))},exportToSvg(){const e=document.querySelector(".inner-editor");(0,T.KT)(e,{filter:e=>!e.classList?.contains("baklava-node-palette"),imagePlaceholder:qe.h}).then((e=>{const t=document.createElement("a");t.download="dataflow.svg",t.href=e,t.dataset.downloadurl=[e,t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{ie.Z.showToast("error",`Export to SVG failed: ${e}`)}))},onClickNodeSearch(){this.togglePanel(this.panels.nodesearch),this.panels.nodesearch.isOpen&&this.$nextTick((()=>this.$refs.searchbarInput.focus()))},openNavbar(){this.navbarGuard=!0,this.$refs.navbar.classList.add("isHovered")},handleMouseLeave(e){this.$refs.navbar.classList.contains("isHovered")&&(!this.hideHud&&!this.$isMobile||this.editorManager.baklavaView.displayedGraph.sidebar.visible||e.target.closest(".baklava-node-palette")||(this.navbarGuard?this.navbarGuard=!1:(this.togglePanel(this.panels.palette,!0),this.$refs.navbar.classList.remove("isHovered"))))},updateHoverInfo(e,t=!1){(!t||this.activeNavbarItemsNames.includes(e)||this.isInProgress(e))&&(this.hoverInfo.hoveredPanel=e,this.hoverInfo.isHovered=!0)},resetHoverInfo(e){this.hoverInfo.hoveredPanel===e&&(this.hoverInfo.hoveredPanel=void 0,this.hoverInfo.isHovered=!1)},isHovered(e){return this.hoverInfo.hoveredPanel===e&&this.hoverInfo.isHovered},isInProgress:e=>re.Z.get(e).inProgress,isStoppable(e){return this.externalApplicationManager.appCapabilities.stoppable_methods?.includes(e)??!0},getNavbarActionTooltip(e){return this.isStoppable(e.procedureName)&&this.isInProgress(e.procedureName)?void 0!==e.stopName?e.stopName:`Stop ${e.name}`:e.name},updateActiveNavbarItems(){const{navbarItems:e}=this;let t=new Set(e.map((e=>e.procedureName)));e.filter((e=>this.isInProgress(e.procedureName))).forEach((e=>{t=new Set((e.allowToRunInParallelWith??[]).filter((e=>t.has(e)))).add(e.procedureName)})),this.activeNavbarItemsNames=Array.from(t)},returnFromSubgraph(){this.editorManager.returnFromSubgraph(),this.resetHoverInfo("subgraphReturn")}},async mounted(){this.isMounted=!0,this.buttonWidth=this.$refs.palette.offsetWidth,this.windowWidth=window.innerWidth,window.addEventListener("resize",(()=>{this.windowWidth=window.innerWidth,this.$refs.palette&&(this.buttonWidth=this.$refs.palette.offsetWidth)})),document.addEventListener("fullscreenchange",(()=>{this.panels.fullscreen.isOpen=!W.api.isFullscreen})),this.externalApplicationManager.backendAvailable&&this.externalApplicationManager.startStatusInterval()}},je=(0,ee.Z)(Ve,[["render",function(e,t,n,i,s,l){const T=(0,a.up)("SaveMenu"),Z=(0,a.up)("BlurPanel"),L=(0,a.up)("Logo"),E=(0,a.up)("DropdownItem"),W=(0,a.up)("Cube"),q=(0,a.up)("CassetteStop"),R=(0,a.up)("Arrow"),V=(0,a.up)("Magnifier"),j=(0,a.up)("Expand"),B=(0,a.up)("Collapse"),$=(0,a.up)("Cogwheel"),U=(0,a.up)("Backend"),z=(0,a.up)("Bell"),G=(0,a.up)("Notifications"),Y=(0,a.up)("Settings"),Q=(0,a.up)("CustomSidebar"),K=(0,a.Q2)("click-outside");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(o.uT,{name:"fade",onClick:t[1]||(t[1]=(0,o.iM)((e=>s.saveMenuShow=!1),["self"]))},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(T,{modelValue:s.saveMenuShow,"onUpdate:modelValue":t[0]||(t[0]=e=>s.saveMenuShow=e),viewModel:s.editorManager.baklavaView,saveConfiguration:s.saveConfiguration},null,8,["modelValue","viewModel","saveConfiguration"]),[[o.F8,s.saveMenuShow]])])),_:1},512),[[o.F8,s.saveMenuShow]])])),_:1}),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",c,[(0,a.wy)((0,a._)("div",{ref:"navbar",class:(0,r.C_)(["wrapper prevent-select",l.hideHud||e.$isMobile?"wrapper-hidden":"wrapper-hud"]),onPointerenter:t[28]||(t[28]=e=>e.target.classList.add("isHovered"))},[(0,a._)("div",d,[(0,a._)("div",{style:(0,r.j5)(l.leftContainerStyles)},[(0,a._)("div",{class:(0,r.C_)(["logo",l.mobileClasses]),onPointerover:t[2]||(t[2]=()=>l.updateHoverInfo("logo")),onPointerleave:t[3]||(t[3]=()=>l.resetHoverInfo("logo"))},[(0,a.Wm)(L,{hover:l.isHovered("logo")},null,8,["hover"]),(0,a._)("div",u,[this.editorManager.specificationLoaded?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(E,{key:0,id:"create-new-graph-button",text:"Create new graph",type:"'button'",eventFunction:l.createNewGraphCallback},null,8,["eventFunction"])),this.externalApplicationManager.externalApplicationConnected?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[p,(0,a.Wm)(E,{text:"Load file",id:"request-dataflow-button",eventFunction:l.importDataflow},null,8,["eventFunction"]),(0,a.Wm)(E,{text:"Save file",type:"button",eventFunction:async()=>l.requestDataflowExport(!1)},null,8,["eventFunction"]),(0,a.Wm)(E,{text:"Save file as...",type:"button",eventFunction:async()=>l.requestDataflowExport(!0)},null,8,["eventFunction"])],64)):(0,a.kq)("",!0),v],64)):(0,a.kq)("",!0),this.externalApplicationManager.backendAvailable||l.hideHud?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(E,{text:"Load specification",id:"load-spec-button",eventFunction:l.loadSpecificationCallback},null,8,["eventFunction"]),this.editorManager.specificationLoaded?((0,a.wg)(),(0,a.j4)(E,{key:0,text:"Save specification as...",type:"'button'",eventFunction:()=>{s.saveMenuShow=!s.saveMenuShow,s.saveConfiguration=s.saveSpecificationConfiguration}},null,8,["eventFunction"])):(0,a.kq)("",!0),h],64)),this.editorManager.specificationLoaded?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[l.hideHud?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(E,{key:0,id:"load-dataflow-button",text:"Load graph file",eventFunction:l.loadDataflowCallback},null,8,["eventFunction"])),(0,a.Wm)(E,{type:"'button'",text:"Save graph file",eventFunction:()=>s.saveGraphConfiguration.saveCallback()},null,8,["eventFunction"]),(0,a.Wm)(E,{type:"'button'",text:"Save graph as file as...",eventFunction:()=>{s.saveMenuShow=!s.saveMenuShow,s.saveConfiguration=s.saveGraphConfiguration}},null,8,["eventFunction"]),g],64)):(0,a.kq)("",!0),(0,a.Wm)(E,{type:"'button'",text:"Export graph to PNG",eventFunction:l.exportToPng},null,8,["eventFunction"]),(0,a.Wm)(E,{type:"'button'",text:"Export graph to HTML-based SVG",eventFunction:l.exportToSvg},null,8,["eventFunction"])])],34),l.hideHud||l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,ref:"palette",class:(0,r.C_)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[4]||(t[4]=()=>l.togglePanel(s.panels.palette)),onPointerover:t[5]||(t[5]=()=>l.updateHoverInfo("palette")),onPointerleave:t[6]||(t[6]=()=>l.resetHoverInfo("palette"))},[(0,a.Wm)(W,{hover:l.isHovered("palette"),class:"small_svg"},null,8,["hover"]),(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses])},[l.paletteOpen?((0,a.wg)(),(0,a.iD)("span",m,"Hide node browser")):((0,a.wg)(),(0,a.iD)("span",f,"Show node browser"))],2)],34)),this.externalApplicationManager.backendAvailable?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(l.navbarItems,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.name,id:`navbar-button-${e.procedureName}`,class:(0,r.C_)([l.activeNavbarItems.includes(e.procedureName)||l.isInProgress(e.procedureName)?"hoverbox":"box",l.mobileClasses,{"button-in-progress":l.isInProgress(e.procedureName)}]),role:"button",onClick:async()=>l.requestDataflowAction(e),onPointerover:()=>l.updateHoverInfo(e.procedureName,!0),onPointerleave:()=>l.resetHoverInfo(e.procedureName)},[l.isStoppable(e.procedureName)&&l.isInProgress(e.procedureName)?((0,a.wg)(),(0,a.j4)(q,{key:0,class:"small_svg",hover:l.isHovered(e.procedureName)},null,8,["hover"])):((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon),{key:1,class:"small_svg",hover:l.isHovered(e.procedureName),imgURI:e.iconName},null,8,["hover","imgURI"])),b,(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses])},[(0,a._)("span",null,(0,r.zw)(l.getNavbarActionTooltip(e)),1)],2)],42,w)))),128)):(0,a.kq)("",!0),this.editorManager.editor.isInSubgraph()?((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,r.C_)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[7]||(t[7]=(...e)=>l.returnFromSubgraph&&l.returnFromSubgraph(...e)),onPointerover:t[8]||(t[8]=()=>l.updateHoverInfo("subgraphReturn")),onPointerleave:t[9]||(t[9]=()=>l.resetHoverInfo("subgraphReturn"))},[(0,a.Wm)(R,{rotate:"down",hover:l.isHovered("subgraphReturn"),color:"white",class:"small_svg"},null,8,["hover"]),(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses])},y,2)],34)):(0,a.kq)("",!0)],4),s.editTitle&&!s.panels.nodesearch.isOpen?(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,a.LL)(s.editorTitleInterface.component),{key:0,intf:s.editorTitleInterface,class:(0,r.C_)(["editorTitleInput",l.mobileClasses]),modelValue:s.graphName,"onUpdate:modelValue":t[10]||(t[10]=e=>s.graphName=e)},null,8,["intf","class","modelValue"])),[[K,()=>{s.editTitle=!1}]]):(0,a.kq)("",!0),s.editTitle||s.panels.nodesearch.isOpen?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,r.C_)(["editorTitle",l.mobileClasses]),onDblclick:t[11]||(t[11]=e=>s.editTitle=!l.readonly)},(0,r.zw)(l.editorTitle),35)),(0,a._)("div",{style:(0,r.j5)(l.rightContainerStyles)},[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{ref:"searchbar",class:(0,r.C_)(["hoverbox",l.mobileClasses]),role:"button",onPointerover:t[12]||(t[12]=()=>l.updateHoverInfo("search")),onPointerleave:t[13]||(t[13]=()=>{l.resetHoverInfo("search")}),onClick:t[14]||(t[14]=(...e)=>l.onClickNodeSearch&&l.onClickNodeSearch(...e))},[(0,a.Wm)(V,{hover:l.isHovered("search"),class:"small_svg"},null,8,["hover"]),(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses,l.settingsTooltipClasses])},[s.panels.nodesearch.isOpen?((0,a.wg)(),(0,a.iD)("span",k,"Hide node search bar")):((0,a.wg)(),(0,a.iD)("span",C,"Show node search bar"))],2)],34)),[[K,()=>s.panels.nodesearch.isOpen=""!=s.searchEditorNodesQuery]]),(0,a.wy)((0,a._)("div",{style:(0,r.j5)(l.nodesearchInputStyles),class:(0,r.C_)(["search-editor-nodes",l.mobileClasses])},[(0,a.wy)((0,a._)("input",{ref:"searchbarInput","onUpdate:modelValue":t[15]||(t[15]=e=>s.searchEditorNodesQuery=e),placeholder:"Search for nodes"},null,512),[[o.nr,s.searchEditorNodesQuery]])],6),[[o.F8,s.panels.nodesearch.isOpen]]),(0,a._)("div",{ref:"fullscreen",class:(0,r.C_)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[16]||(t[16]=(...e)=>l.toggleFullscreen&&l.toggleFullscreen(...e)),onPointerover:t[17]||(t[17]=()=>l.updateHoverInfo("Fullscreen")),onPointerleave:t[18]||(t[18]=()=>l.resetHoverInfo("Fullscreen"))},[s.panels.fullscreen.isOpen?((0,a.wg)(),(0,a.j4)(B,{key:1,hover:l.isHovered("Fullscreen"),class:"small_svg"},null,8,["hover"])):((0,a.wg)(),(0,a.j4)(j,{key:0,hover:l.isHovered("Fullscreen"),class:"small_svg"},null,8,["hover"])),(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses,l.settingsTooltipClasses])},[s.panels.fullscreen.isOpen?((0,a.wg)(),(0,a.iD)("span",S,"Disable fullscreen")):((0,a.wg)(),(0,a.iD)("span",_,"Enable fullscreen"))],2)],34),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{ref:"settings",class:(0,r.C_)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[19]||(t[19]=()=>l.togglePanel(s.panels.settings)),onPointerover:t[20]||(t[20]=()=>l.updateHoverInfo("settings")),onPointerleave:t[21]||(t[21]=()=>l.resetHoverInfo("settings"))},[(0,a.Wm)($,{hover:l.isHovered("settings"),class:"small_svg"},null,8,["hover"]),(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses,l.settingsTooltipClasses])},[s.panels.settings.isOpen?((0,a.wg)(),(0,a.iD)("span",I,"Hide settings")):((0,a.wg)(),(0,a.iD)("span",N,"Show settings"))],2)],34)),[[K,()=>s.panels.settings.isOpen=!1]]),this.externalApplicationManager.backendAvailable?((0,a.wg)(),(0,a.iD)("div",{key:0,ref:"backend",class:(0,r.C_)(["hoverbox",l.mobileClasses]),onClick:t[22]||(t[22]=()=>l.togglePanel(s.panels.backendStatus)),onPointerover:t[23]||(t[23]=()=>l.updateHoverInfo("backendStatus")),onPointerleave:t[24]||(t[24]=()=>l.resetHoverInfo("backendStatus"))},[this.externalApplicationManager.externalApplicationConnected?((0,a.wg)(),(0,a.j4)(U,{key:0,color:"connected",class:"small_svg",active:l.backendStatusOpen,hover:l.isHovered("backendStatus")},null,8,["active","hover"])):((0,a.wg)(),(0,a.j4)(U,{key:1,color:"disconnected",class:"small_svg",active:l.backendStatusOpen,hover:l.isHovered("backendStatus")},null,8,["active","hover"])),(0,a._)("div",{class:(0,r.C_)(["tooltip",l.mobileClasses,l.backendStatusTooltipClasses])},M,2),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",null,[P,this.externalApplicationManager.externalApplicationConnected?((0,a.wg)(),(0,a.iD)("span",H,"Connected")):((0,a.wg)(),(0,a.iD)("span",D,"Disconnected"))])])),[[K,e=>l.clickOutside(e,s.panels.backendStatus)]])],34)):(0,a.kq)("",!0),l.hideHud?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:1,ref:"notifications",class:(0,r.C_)(["hoverbox",l.mobileClasses]),role:"button",onClick:t[25]||(t[25]=()=>l.togglePanel(s.panels.notifications)),onPointerover:t[26]||(t[26]=()=>l.updateHoverInfo("notifications")),onPointerleave:t[27]||(t[27]=()=>l.resetHoverInfo("notifications"))},[(0,a.Wm)(z,{id:"navbar-bell",color:this.notificationStore.notifications.length>0?"green":"gray",hover:l.isHovered("notifications"),class:"small_svg"},null,8,["color","hover"]),l.notificationsOpen?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)(["tooltip",l.mobileClasses,l.notificationsTooltipClasses])},A,2)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,r.C_)(["tooltip",l.mobileClasses,l.notificationsTooltipClasses])},F,2))],34))],4)]),O],34),[[o.F8,!l.preview]]),(0,a.wy)((0,a.Wm)(G,null,null,512),[[K,e=>l.clickOutside(e,s.panels.notifications)]]),(0,a.wy)((0,a.Wm)(Y,{viewModel:s.editorManager.baklavaView},null,8,["viewModel"]),[[K,e=>l.clickOutside(e,s.panels.settings)]]),(0,a.Wm)(Q,{onSidebarOpen:l.openNavbar},null,8,["onSidebarOpen"])])),[[K,e=>l.handleMouseLeave(e)]])],64)}],["__scopeId","data-v-45b20100"]]),Be={class:"container"},$e={class:"tab"},Ue=["onClick"],ze={class:"indicator-wrapper"},Ge={class:"button-wrapper"},Ye=(e=>((0,a.dD)("data-v-028890e5"),e=e(),(0,a.Cn)(),e))((()=>(0,a._)("span",null,"Clear terminal",-1))),Qe={id:"hterm-terminal"};var Ke=n(95610);const Je=(0,a.aZ)({props:{terminalInstance:{type:String}},setup(e){let t;const n={"background-color":"#1d1d1d","cursor-color":"white","mouse-right-click-paste":!1,"pass-meta-v":!1,"mouse-paste-button":"no-button","pass-on-drop":!1,"shift-insert-paste":!1},o=(0,a.Fl)((()=>se.A9.logs[e.terminalInstance])),i=(0,a.Fl)((()=>void 0===o.value?0:o.value.length)),s=n=>{void 0!==t&&t.io.print(e.terminalInstance===se.ax?n.replace(/\n/g,"\r\n"):n)};let r=0;const l=(0,le.Z)();(0,a.bv)((async()=>{await Ke.D.init(),Object.keys(n).forEach((e=>{localStorage.setItem(`/hterm/profiles/default/${e}`,n[e])})),t=new Ke.N.Terminal,t.scrollPort_.contenteditable=!1,t.onTerminalReady=function(){this.io.sendString=t=>{se.A9.isReadOnly(e.terminalInstance)||l.requestTerminalRead(e.terminalInstance,t)},this.onVTKeystroke=t=>{se.A9.isReadOnly(e.terminalInstance)||l.requestTerminalRead(e.terminalInstance,t)},this.io.onTerminalResize=()=>{this.focus()},this.installKeyboard()},t.decorate(document.querySelector("#hterm-terminal")),(0,a.YP)([()=>e.terminalInstance,i],(async([n,o],[i,l])=>{void 0!==n&&(se.A9.readOnly[e.terminalInstance]?(t.scrollPort_.contenteditable=!1,t.setCursorVisible(!1)):(t.scrollPort_.contenteditable=!0,t.setCursorVisible(!0)),await(0,a.Y3)(),i===n&&0!==o||(r=0,void 0!==t&&(s("[0m"),t.scrollHome(),t.wipeContents())),l!==o||i!==n)&&se.A9.logs[n].slice(r).forEach(((e,t)=>{r>0&&n===se.ax&&s("\n\n"),s(e),r+=1}))}))}))}}),Xe=(0,ee.Z)(Je,[["render",function(e,t,n,o,i,s){return(0,a.wg)(),(0,a.iD)("div",Qe)}],["__scopeId","data-v-c10c6824"]]);var et=n(63983),tt=n(7392),nt=n(67998);const at=(0,a.aZ)({components:{Arrow:R.Z,Indicator:et.Z,Bin:tt.Z,Terminal:Xe},setup(){const e=(0,s.iH)(null),t=(0,s.iH)(null),n=(0,s.iH)(void 0),o=(0,s.iH)(!1),i=(0,s.iH)(0),r=(0,s.iH)(!1),l=(0,a.Fl)((()=>o.value?{height:`${Math.max(i.value,395)}px`}:{height:"unset"})),c=(0,a.Fl)((()=>({"pointer-events":o.value?"all":"none"})));(0,a.bv)((()=>{e.value.addEventListener("mousedown",(0,nt.o)((e=>{i.value=e})))}));const d=(0,s.iH)([]),u=(0,a.Fl)((()=>{const e=Object.values(se.A9.logs).map((e=>e.length)),t=Object.keys(se.A9.logs),n=[];for(let a=0;a<t.length;a+=1)n.push({name:t[a],length:e[a]});return n}));(0,a.YP)(u,((e,t)=>{const a=null==t?void 0:t.map((e=>e.name));e.forEach((e=>{(null==a?void 0:a.includes(e.name))?t.find((t=>t.name===e.name)).length!==e.length&&e.name!==n.value&&(d.value.find((t=>t.name===e.name)).hasNewMessage=!0):d.value.push({name:e.name,hasNewMessage:0!==e.length})}))}),{immediate:!0});const p=e=>{d.value.forEach((t=>{t.name===e&&(t.hasNewMessage=!1)}))};return{toggleTerminalPanel:e=>{var i,s;if(void 0!==e||o.value)if(e===n.value||void 0===e)n.value=void 0,o.value=!1;else{const a=null!==(s=null===(i=t.value)||void 0===i?void 0:i.style.height)&&void 0!==s?s:"unset";n.value=e,o.value=!0,p(e),"unset"!==a&&(l.value.height=a)}else n.value=se.ax,o.value=!0,p(se.ax);void 0===n.value||se.A9.isReadOnly(n.value)||(0,a.Y3)().then((()=>{var e;return null===(e=document.getElementById("hterm-terminal"))||void 0===e?void 0:e.focus()}))},clearTerminalOutput:e=>{void 0!==e?se.A9.remove(e):se.A9.remove()},displayedTerminals:d,activeTerminal:n,isTerminalPanelOpened:o,resizer:e,terminalWrapper:t,pipelineSpanClasses:e=>({active:o.value&&e===n.value}),terminalWrapperStyles:l,resizerStyles:c,arrowHovered:r,terminalIndicatorColor:e=>e?"green":"gray"}}}),ot=(0,ee.Z)(at,[["render",function(e,t,n,i,s,l){const c=(0,a.up)("Indicator"),d=(0,a.up)("Bin"),u=(0,a.up)("Arrow"),p=(0,a.up)("Terminal");return(0,a.wg)(),(0,a.iD)("div",{ref:"terminalWrapper",class:"terminal-wrapper",style:(0,r.j5)(e.terminalWrapperStyles)},[(0,a._)("div",Be,[(0,a._)("div",{ref:"resizer",class:"resizer",style:(0,r.j5)(e.resizerStyles)},null,4),(0,a._)("div",$e,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.displayedTerminals,(t=>((0,a.wg)(),(0,a.iD)("button",{key:t.name,class:(0,r.C_)(["tab-item",e.pipelineSpanClasses(t.name)]),onClick:n=>e.toggleTerminalPanel(t.name)},[(0,a._)("span",{class:(0,r.C_)(e.pipelineSpanClasses(t.name))},(0,r.zw)(t.name),3),(0,a._)("div",ze,[t.hasNewMessage?((0,a.wg)(),(0,a.j4)(c,{key:0,color:e.terminalIndicatorColor(t.hasNewMessage)},null,8,["color"])):(0,a.kq)("",!0)])],10,Ue)))),128))]),(0,a._)("div",Ge,[e.isTerminalPanelOpened?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=t=>e.clearTerminalOutput(e.activeTerminal))},[(0,a.Wm)(d),Ye])):(0,a.kq)("",!0),(0,a._)("button",{onClick:t[1]||(t[1]=()=>{e.arrowHovered=!1,e.toggleTerminalPanel(void 0)}),onMouseenter:t[2]||(t[2]=t=>e.arrowHovered=!0),onMouseleave:t[3]||(t[3]=t=>e.arrowHovered=!1)},[e.isTerminalPanelOpened?((0,a.wg)(),(0,a.j4)(u,{key:1,color:"white",scale:"small",rotate:"left",hover:e.arrowHovered},null,8,["hover"])):((0,a.wg)(),(0,a.j4)(u,{key:0,color:"white",scale:"small",rotate:"up",hover:e.arrowHovered},null,8,["hover"]))],32)])]),(0,a.wy)((0,a.Wm)(p,{terminalInstance:e.activeTerminal},null,8,["terminalInstance"]),[[o.F8,e.isTerminalPanelOpened]])],4)}],["__scopeId","data-v-028890e5"]]),it={class:"loading-screen"},st={components:{SelfBuildingSquareSpinner:n(31313).v}},rt=(0,ee.Z)(st,[["render",function(e,t,n,o,i,s){const r=(0,a.up)("SelfBuildingSquareSpinner");return(0,a.wg)(),(0,a.iD)("div",it,[(0,a.Wm)(r,{id:"loading-screen-spinner",size:80})])}]]),lt={components:{NavBar:je,Editor:n(89373).Z,TerminalPanel:ot,LoadingScreen:rt},setup(){const e=oe.ZP.getEditorManagerInstance(),t=(0,s.iH)(!1),n={};try{(o=Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}())).keys().forEach((e=>n[e]=o(e)))}catch(e){}finally{e.baklavaView.cache=n}var o;const i=(0,a.Fl)((()=>e.baklavaView.editor.hideHud));return{editorManager:e,hideHud:i,handleLoadFinish:()=>{t.value=!0},finishedLoading:t}}},ct=(0,ee.Z)(lt,[["render",function(e,t,n,s,r,l){const c=(0,a.up)("LoadingScreen"),d=(0,a.up)("NavBar"),u=(0,a.up)("Editor"),p=(0,a.up)("TerminalPanel");return(0,a.wg)(),(0,a.iD)("div",null,[s.finishedLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:0})),(0,a._)("div",i,[(0,a.Wm)(d),(0,a.Wm)(u,{class:"inner-editor","view-model":s.editorManager.baklavaView,onLoadFinish:s.handleLoadFinish},null,8,["view-model","onLoadFinish"]),(0,a.wy)((0,a.Wm)(p,null,null,512),[[o.F8,s.finishedLoading&&!s.hideHud]])])])}]])},48525:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(66252),o=n(3577);const i={class:"notification-badge"},s={class:"notification-message"},r={class:"message"};var l=n(81904);const c={components:{ExclamationMark:n(7441).Z,Cross:l.Z},props:{type:{type:String,required:!0}}};var d=n(83744);const u=(0,d.Z)(c,[["render",function(e,t,n,i,s,r){const l=(0,a.up)("ExclamationMark"),c=(0,a.up)("Cross");return(0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(n.type)},["info"===n.type?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),"warning"===n.type?((0,a.wg)(),(0,a.j4)(l,{key:1,rotate:"flip"})):(0,a.kq)("",!0),"error"===n.type?((0,a.wg)(),(0,a.j4)(c,{key:2,color:"white"})):(0,a.kq)("",!0)],2)}],["__scopeId","data-v-9ef0f814"]]);var p=n(85950);const v={components:{Cross:l.Z,NotificationBadge:u},props:{message:{type:String,required:!0},type:{type:String,required:!0},border:{type:String,default:"none"},index:{type:Number,default:0}},data:()=>({notificationStore:p.Rb}),methods:{remove(){p.Rb.removeOne(this.index)}}},h=(0,d.Z)(v,[["render",function(e,t,n,l,c,d){const u=(0,a.up)("NotificationBadge"),p=(0,a.up)("Cross");return(0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)([n.border,"notification-container"])},[(0,a._)("div",i,[(0,a.Wm)(u,{type:n.type},null,8,["type"])]),(0,a._)("div",s,["info"===n.type?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,o.C_)(n.type)},"Info",2)):(0,a.kq)("",!0),"warning"===n.type?((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,o.C_)(n.type)},"Warning",2)):(0,a.kq)("",!0),"error"===n.type?((0,a.wg)(),(0,a.iD)("span",{key:2,class:(0,o.C_)(n.type)},"Error",2)):(0,a.kq)("",!0),(0,a._)("span",r,(0,o.zw)(n.message),1)]),(0,a._)("button",{onClick:t[0]||(t[0]=(...e)=>d.remove&&d.remove(...e)),tabindex:"-1"},[(0,a.Wm)(p,{color:"white",tabindex:"-1"})])],2)}],["__scopeId","data-v-0512bfcb"]])},8532:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(66252),o=n(3577);const i=(0,a.aZ)({props:{top:{type:Number,default:0},left:{type:Number,default:0},text:{type:String,required:!0}},setup:e=>({styles:(0,a.Fl)((()=>{const t={};return t.top=`${e.top}px`,t.left=`${e.left}px`,t}))})}),s=(0,n(83744).Z)(i,[["render",function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.iD)("div",{class:"__tooltip",style:(0,o.j5)(e.styles)},(0,o.zw)(e.text),5)}]])}}]);
//# sourceMappingURL=index-42f9d7e6.0e774203.js.map