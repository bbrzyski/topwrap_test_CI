{"version":3,"file":"js/114.1887e3ae.js","mappings":"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","sources":["webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/event.js","webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/hook.js","webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/proxy.js","webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/subscribable.js","webpack://pipeline-manager/./node_modules/@baklavajs/renderer-vue/dist/renderer-vue.es.js"],"sourcesContent":["import { Subscribable } from \"./subscribable\";\n/** Main event class for Baklava */\nexport class BaklavaEvent extends Subscribable {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    /**\n     * Invoke all listeners\n     * @param data The data to invoke the listeners with.\n     */\n    emit(data) {\n        this.listeners.forEach((l) => l(data, this.entity));\n    }\n}\n/**\n * Extension for the {@link BaklavaEvent} class. A listener can return `false` to prevent\n * this event from happening.\n */\nexport class PreventableBaklavaEvent extends Subscribable {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    /**\n     * Invoke all listeners.\n     * @param data The data to invoke all listeners with\n     * @returns An object, where the `prevented` field is `true` when one of the listeners requested to prevent the event, otherwise `false`\n     */\n    emit(data) {\n        let prevented = false;\n        const prevent = () => [(prevented = true)];\n        for (const l of Array.from(this.listeners.values())) {\n            l(data, prevent, this.entity);\n            if (prevented) {\n                return { prevented: true };\n            }\n        }\n        return { prevented: false };\n    }\n}\n","import { Subscribable } from \"./subscribable\";\n/** Similar to the SequentialHook, but allows to pass a different entity for each execute call */\nexport class DynamicSequentialHook extends Subscribable {\n    execute(data, entity) {\n        let currentValue = data;\n        for (const callback of this.listeners) {\n            currentValue = callback(currentValue, entity);\n        }\n        return currentValue;\n    }\n}\n/** This class will run the taps one after each other and pass the data from every subscriber to another. */\nexport class SequentialHook extends DynamicSequentialHook {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    execute(data) {\n        return super.execute(data, this.entity);\n    }\n}\nexport class ParallelHook extends Subscribable {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    execute(data) {\n        const results = [];\n        for (const callback of this.listeners) {\n            results.push(callback(data, this.entity));\n        }\n        return results;\n    }\n}\n","import { Subscribable } from \"./subscribable\";\nexport function createProxy() {\n    const token = Symbol();\n    const listeners = new Map();\n    const targets = new Set();\n    const register = (key, subscribable) => {\n        if (subscribable instanceof Subscribable) {\n            subscribable.registerProxy(token, () => { var _a, _b; return (_b = (_a = listeners.get(key)) === null || _a === void 0 ? void 0 : _a.listeners) !== null && _b !== void 0 ? _b : []; });\n        }\n    };\n    const addSubscribable = (key) => {\n        const subscribable = new Subscribable();\n        listeners.set(key, subscribable);\n        targets.forEach((t) => register(key, t[key]));\n    };\n    const addTarget = (target) => {\n        targets.add(target);\n        for (const key of listeners.keys()) {\n            register(key, target[key]);\n        }\n    };\n    const removeTarget = (target) => {\n        for (const key of listeners.keys()) {\n            if (target[key] instanceof Subscribable) {\n                target[key].unregisterProxy(token);\n            }\n        }\n        targets.delete(target);\n    };\n    const destroy = () => {\n        targets.forEach((t) => removeTarget(t));\n        listeners.clear();\n    };\n    return new Proxy({}, {\n        get(target, key) {\n            if (key === \"addTarget\") {\n                return addTarget;\n            }\n            else if (key === \"removeTarget\") {\n                return removeTarget;\n            }\n            else if (key === \"destroy\") {\n                return destroy;\n            }\n            if (typeof key !== \"string\" || key.startsWith(\"_\")) {\n                // vue internally uses properties starting with _ -> we just ignore them\n                // also ignore all other properties that arent valid indexes for the events/hooks objects\n                return target[key];\n            }\n            if (!listeners.has(key)) {\n                addSubscribable(key);\n            }\n            return listeners.get(key);\n        },\n    });\n}\n","export class Subscribable {\n    constructor() {\n        this.listenerMap = new Map();\n        this._listeners = [];\n        this.proxyMap = new Map();\n        this.proxies = [];\n    }\n    get listeners() {\n        return this._listeners.concat(this.proxies.flatMap((getListeners) => getListeners()));\n    }\n    /**\n     * Subscribe to the event / hook\n     * @param token A token that can be used to unsubscribe from the event / hook later on\n     * @param callback A callback that will be invoked when the event / hook occurs\n     */\n    subscribe(token, callback) {\n        if (this.listenerMap.has(token)) {\n            console.warn(\"Already subscribed. Unsubscribing for you.\\n\" +\n                \"Please check that you don't accidentally use the same token twice \" +\n                \"to register two different handlers for the same event/hook.\");\n            this.unsubscribe(token);\n        }\n        this.listenerMap.set(token, callback);\n        this._listeners.push(callback);\n    }\n    /**\n     * Remove a listener\n     * @param token The token that was specified when subscribing to the listener.\n     * An invalid token does not result in an error.\n     */\n    unsubscribe(token) {\n        if (this.listenerMap.has(token)) {\n            const callback = this.listenerMap.get(token);\n            this.listenerMap.delete(token);\n            const i = this._listeners.indexOf(callback);\n            if (i >= 0) {\n                this._listeners.splice(i, 1);\n            }\n        }\n    }\n    /** This function is only used internally for proxies */\n    registerProxy(token, getListeners) {\n        if (this.proxyMap.has(token)) {\n            console.warn(\"Already subscribed. Unsubscribing for you.\\n\" +\n                \"Please check that you don't accidentally use the same token twice \" +\n                \"to register two different proxies for the same event/hook.\");\n            this.unregisterProxy(token);\n        }\n        this.proxyMap.set(token, getListeners);\n        this.proxies.push(getListeners);\n    }\n    /** This function is only used internally for proxies */\n    unregisterProxy(token) {\n        if (!this.proxyMap.has(token)) {\n            return;\n        }\n        const getListeners = this.proxyMap.get(token);\n        this.proxyMap.delete(token);\n        const i = this.proxies.indexOf(getListeners);\n        if (i >= 0) {\n            this.proxies.splice(i, 1);\n        }\n    }\n}\n","import { toRef, ref, computed, provide, defineComponent, openBlock, createElementBlock, normalizeStyle, isRef, toRefs as toRefs$1, customRef, getCurrentScope, onScopeDispose, unref, watch, resolveComponent, createBlock, Transition, withCtx, withDirectives, createElementVNode, normalizeClass, Fragment, renderList, withModifiers, toDisplayString, createCommentVNode, vShow, inject, onMounted, onUpdated, resolveDynamicComponent, createVNode, withKeys, vModelText, nextTick, onBeforeUnmount, markRaw, reactive, createStaticVNode, createTextVNode, renderSlot, TransitionGroup, shallowReadonly } from \"vue\";\nimport { GRAPH_NODE_TYPE_PREFIX, NodeInterface as NodeInterface$1, defineNode, getGraphNodeTypeString, GraphTemplate, Graph, Editor as Editor$1 } from \"@baklavajs/core\";\nimport { SequentialHook } from \"@baklavajs/events\";\nlet viewModelRef = null;\nfunction providePlugin(viewModel) {\n  viewModelRef = viewModel;\n}\nfunction useViewModel() {\n  if (!viewModelRef) {\n    throw new Error(\"providePlugin() must be called before usePlugin()\");\n  }\n  return {\n    viewModel: viewModelRef\n  };\n}\nfunction useGraph() {\n  const { viewModel } = useViewModel();\n  return {\n    graph: toRef(viewModel.value, \"displayedGraph\"),\n    switchGraph: viewModel.value.switchGraph\n  };\n}\nfunction useDragMove(positionRef) {\n  const { graph } = useGraph();\n  const draggingStartPoint = ref(null);\n  const draggingStartPosition = ref(null);\n  const dragging = computed(() => !!draggingStartPoint.value);\n  const onPointerDown = (ev) => {\n    draggingStartPoint.value = {\n      x: ev.pageX,\n      y: ev.pageY\n    };\n    draggingStartPosition.value = {\n      x: positionRef.value.x,\n      y: positionRef.value.y\n    };\n  };\n  const onPointerMove = (ev) => {\n    if (draggingStartPoint.value) {\n      const dx = ev.pageX - draggingStartPoint.value.x;\n      const dy = ev.pageY - draggingStartPoint.value.y;\n      positionRef.value.x = draggingStartPosition.value.x + dx / graph.value.scaling;\n      positionRef.value.y = draggingStartPosition.value.y + dy / graph.value.scaling;\n    }\n  };\n  const onPointerUp = () => {\n    draggingStartPoint.value = null;\n    draggingStartPosition.value = null;\n  };\n  return { dragging, onPointerDown, onPointerMove, onPointerUp };\n}\nfunction useTransform() {\n  const { graph } = useGraph();\n  const transform = (x, y) => {\n    const tx = x / graph.value.scaling - graph.value.panning.x;\n    const ty = y / graph.value.scaling - graph.value.panning.y;\n    return [tx, ty];\n  };\n  return { transform };\n}\nfunction usePanZoom() {\n  const { graph } = useGraph();\n  let pointerCache = [];\n  let prevDiff = -1;\n  let midpoint = { x: 0, y: 0 };\n  const panningRef = computed(() => graph.value.panning);\n  const dragMove = useDragMove(panningRef);\n  const styles = computed(() => ({\n    \"transform-origin\": \"0 0\",\n    \"transform\": `scale(${graph.value.scaling}) translate(${graph.value.panning.x}px, ${graph.value.panning.y}px)`\n  }));\n  const applyZoom = (centerX, centerY, newScale) => {\n    const currentPoint = [\n      centerX / graph.value.scaling - graph.value.panning.x,\n      centerY / graph.value.scaling - graph.value.panning.y\n    ];\n    const newPoint = [centerX / newScale - graph.value.panning.x, centerY / newScale - graph.value.panning.y];\n    const diff = [newPoint[0] - currentPoint[0], newPoint[1] - currentPoint[1]];\n    graph.value.panning.x += diff[0];\n    graph.value.panning.y += diff[1];\n    graph.value.scaling = newScale;\n  };\n  const onMouseWheel = (ev) => {\n    ev.preventDefault();\n    let scrollAmount = ev.deltaY;\n    if (ev.deltaMode === 1) {\n      scrollAmount *= 32;\n    }\n    const newScale = graph.value.scaling * (1 - scrollAmount / 3e3);\n    applyZoom(ev.offsetX, ev.offsetY, newScale);\n  };\n  const getCoordsFromCache = () => ({\n    ax: pointerCache[0].clientX,\n    ay: pointerCache[0].clientY,\n    bx: pointerCache[1].clientX,\n    by: pointerCache[1].clientY\n  });\n  const onPointerDown = (ev) => {\n    pointerCache.push(ev);\n    dragMove.onPointerDown(ev);\n    if (pointerCache.length === 2) {\n      const { ax, ay, bx, by } = getCoordsFromCache();\n      midpoint = {\n        x: ax + (bx - ax) / 2,\n        y: ay + (by - ay) / 2\n      };\n    }\n  };\n  const onPointerMove = (ev) => {\n    for (let i = 0; i < pointerCache.length; i++) {\n      if (ev.pointerId == pointerCache[i].pointerId) {\n        pointerCache[i] = ev;\n        break;\n      }\n    }\n    if (pointerCache.length == 2) {\n      const { ax, ay, bx, by } = getCoordsFromCache();\n      const dx = ax - bx;\n      const dy = ay - by;\n      const curDiff = Math.sqrt(dx * dx + dy * dy);\n      if (prevDiff > 0) {\n        const newScale = graph.value.scaling * (1 + (curDiff - prevDiff) / 500);\n        applyZoom(midpoint.x, midpoint.y, newScale);\n      }\n      prevDiff = curDiff;\n    } else {\n      dragMove.onPointerMove(ev);\n    }\n  };\n  const onPointerUp = (ev) => {\n    pointerCache = pointerCache.filter((p) => p.pointerId !== ev.pointerId);\n    prevDiff = -1;\n    dragMove.onPointerUp();\n  };\n  return { styles, ...dragMove, onPointerDown, onPointerMove, onPointerUp, onMouseWheel };\n}\nvar TemporaryConnectionState = /* @__PURE__ */ ((TemporaryConnectionState2) => {\n  TemporaryConnectionState2[TemporaryConnectionState2[\"NONE\"] = 0] = \"NONE\";\n  TemporaryConnectionState2[TemporaryConnectionState2[\"ALLOWED\"] = 1] = \"ALLOWED\";\n  TemporaryConnectionState2[TemporaryConnectionState2[\"FORBIDDEN\"] = 2] = \"FORBIDDEN\";\n  return TemporaryConnectionState2;\n})(TemporaryConnectionState || {});\nfunction useTemporaryConnection() {\n  const { graph } = useGraph();\n  const temporaryConnection = ref(null);\n  const hoveringOver = ref(null);\n  const onMouseMove = (ev) => {\n    if (temporaryConnection.value) {\n      temporaryConnection.value.mx = ev.offsetX / graph.value.scaling - graph.value.panning.x;\n      temporaryConnection.value.my = ev.offsetY / graph.value.scaling - graph.value.panning.y;\n    }\n  };\n  const onMouseDown = () => {\n    if (hoveringOver.value) {\n      const connection = graph.value.connections.find((c) => c.to === hoveringOver.value);\n      if (hoveringOver.value.isInput && connection) {\n        temporaryConnection.value = {\n          status: TemporaryConnectionState.NONE,\n          from: connection.from\n        };\n        graph.value.removeConnection(connection);\n      } else {\n        temporaryConnection.value = {\n          status: TemporaryConnectionState.NONE,\n          from: hoveringOver.value\n        };\n      }\n      temporaryConnection.value.mx = void 0;\n      temporaryConnection.value.my = void 0;\n    }\n  };\n  const onMouseUp = () => {\n    if (temporaryConnection.value && hoveringOver.value) {\n      graph.value.addConnection(temporaryConnection.value.from, temporaryConnection.value.to);\n    }\n    temporaryConnection.value = null;\n  };\n  const hoveredOver = (ni) => {\n    hoveringOver.value = ni ?? null;\n    if (ni && temporaryConnection.value) {\n      temporaryConnection.value.to = ni;\n      const checkConnectionResult = graph.value.checkConnection(\n        temporaryConnection.value.from,\n        temporaryConnection.value.to\n      );\n      temporaryConnection.value.status = checkConnectionResult.connectionAllowed ? TemporaryConnectionState.ALLOWED : TemporaryConnectionState.FORBIDDEN;\n      if (checkConnectionResult.connectionAllowed) {\n        const ids = checkConnectionResult.connectionsInDanger.map((c) => c.id);\n        graph.value.connections.forEach((c) => {\n          if (ids.includes(c.id)) {\n            c.isInDanger = true;\n          }\n        });\n      }\n    } else if (!ni && temporaryConnection.value) {\n      temporaryConnection.value.to = void 0;\n      temporaryConnection.value.status = TemporaryConnectionState.NONE;\n      graph.value.connections.forEach((c) => {\n        c.isInDanger = false;\n      });\n    }\n  };\n  provide(\"hoveredOver\", hoveredOver);\n  return { temporaryConnection, onMouseMove, onMouseDown, onMouseUp };\n}\nconst _sfc_main$u = defineComponent({\n  setup() {\n    const { viewModel } = useViewModel();\n    const { graph } = useGraph();\n    const styles = computed(() => {\n      const config = viewModel.value.settings.background;\n      const positionLeft = graph.value.panning.x * graph.value.scaling;\n      const positionTop = graph.value.panning.y * graph.value.scaling;\n      const size = graph.value.scaling * config.gridSize;\n      const subSize = size / config.gridDivision;\n      const backgroundSize = `${size}px ${size}px, ${size}px ${size}px`;\n      const subGridBackgroundSize = graph.value.scaling > config.subGridVisibleThreshold ? `, ${subSize}px ${subSize}px, ${subSize}px ${subSize}px` : \"\";\n      return {\n        backgroundPosition: `left ${positionLeft}px top ${positionTop}px`,\n        backgroundSize: `${backgroundSize} ${subGridBackgroundSize}`\n      };\n    });\n    return { styles };\n  }\n});\nconst _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nfunction _sfc_render$t(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"background\",\n    style: normalizeStyle(_ctx.styles)\n  }, null, 4);\n}\nconst Background = /* @__PURE__ */ _export_sfc(_sfc_main$u, [[\"render\", _sfc_render$t]]);\nvar _a;\nconst isClient = typeof window !== \"undefined\";\nconst isString = (val) => typeof val === \"string\";\nconst noop = () => {\n};\nisClient && ((_a = window == null ? void 0 : window.navigator) == null ? void 0 : _a.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);\nfunction resolveUnref(r) {\n  return typeof r === \"function\" ? r() : unref(r);\n}\nfunction identity(arg) {\n  return arg;\n}\nfunction objectPick(obj, keys2, omitUndefined = false) {\n  return keys2.reduce((n, k) => {\n    if (k in obj) {\n      if (!omitUndefined || obj[k] !== void 0)\n        n[k] = obj[k];\n    }\n    return n;\n  }, {});\n}\nfunction tryOnScopeDispose(fn) {\n  if (getCurrentScope()) {\n    onScopeDispose(fn);\n    return true;\n  }\n  return false;\n}\nvar __defProp$7 = Object.defineProperty;\nvar __defProps$5 = Object.defineProperties;\nvar __getOwnPropDescs$5 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$9 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$9 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$9 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$7 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$9.call(b, prop))\n      __defNormalProp$7(a, prop, b[prop]);\n  if (__getOwnPropSymbols$9)\n    for (var prop of __getOwnPropSymbols$9(b)) {\n      if (__propIsEnum$9.call(b, prop))\n        __defNormalProp$7(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$5 = (a, b) => __defProps$5(a, __getOwnPropDescs$5(b));\nfunction toRefs(objectRef) {\n  if (!isRef(objectRef))\n    return toRefs$1(objectRef);\n  const result = Array.isArray(objectRef.value) ? new Array(objectRef.value.length) : {};\n  for (const key in objectRef.value) {\n    result[key] = customRef(() => ({\n      get() {\n        return objectRef.value[key];\n      },\n      set(v) {\n        if (Array.isArray(objectRef.value)) {\n          const copy = [...objectRef.value];\n          copy[key] = v;\n          objectRef.value = copy;\n        } else {\n          const newObject = __spreadProps$5(__spreadValues$7({}, objectRef.value), { [key]: v });\n          Object.setPrototypeOf(newObject, objectRef.value);\n          objectRef.value = newObject;\n        }\n      }\n    }));\n  }\n  return result;\n}\nfunction unrefElement(elRef) {\n  var _a2;\n  const plain = resolveUnref(elRef);\n  return (_a2 = plain == null ? void 0 : plain.$el) != null ? _a2 : plain;\n}\nconst defaultWindow = isClient ? window : void 0;\nisClient ? window.document : void 0;\nisClient ? window.navigator : void 0;\nisClient ? window.location : void 0;\nfunction useEventListener(...args) {\n  let target;\n  let events;\n  let listeners;\n  let options;\n  if (isString(args[0]) || Array.isArray(args[0])) {\n    [events, listeners, options] = args;\n    target = defaultWindow;\n  } else {\n    [target, events, listeners, options] = args;\n  }\n  if (!target)\n    return noop;\n  if (!Array.isArray(events))\n    events = [events];\n  if (!Array.isArray(listeners))\n    listeners = [listeners];\n  const cleanups = [];\n  const cleanup = () => {\n    cleanups.forEach((fn) => fn());\n    cleanups.length = 0;\n  };\n  const register = (el, event, listener) => {\n    el.addEventListener(event, listener, options);\n    return () => el.removeEventListener(event, listener, options);\n  };\n  const stopWatch = watch(() => unrefElement(target), (el) => {\n    cleanup();\n    if (!el)\n      return;\n    cleanups.push(...events.flatMap((event) => {\n      return listeners.map((listener) => register(el, event, listener));\n    }));\n  }, { immediate: true, flush: \"post\" });\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(stop);\n  return stop;\n}\nfunction onClickOutside(target, handler, options = {}) {\n  const { window: window2 = defaultWindow, ignore = [], capture = true, detectIframe = false } = options;\n  if (!window2)\n    return;\n  let shouldListen = true;\n  let fallback;\n  const shouldIgnore = (event) => {\n    return ignore.some((target2) => {\n      if (typeof target2 === \"string\") {\n        return Array.from(window2.document.querySelectorAll(target2)).some((el) => el === event.target || event.composedPath().includes(el));\n      } else {\n        const el = unrefElement(target2);\n        return el && (event.target === el || event.composedPath().includes(el));\n      }\n    });\n  };\n  const listener = (event) => {\n    window2.clearTimeout(fallback);\n    const el = unrefElement(target);\n    if (!el || el === event.target || event.composedPath().includes(el))\n      return;\n    if (event.detail === 0)\n      shouldListen = !shouldIgnore(event);\n    if (!shouldListen) {\n      shouldListen = true;\n      return;\n    }\n    handler(event);\n  };\n  const cleanup = [\n    useEventListener(window2, \"click\", listener, { passive: true, capture }),\n    useEventListener(window2, \"pointerdown\", (e) => {\n      const el = unrefElement(target);\n      if (el)\n        shouldListen = !e.composedPath().includes(el) && !shouldIgnore(e);\n    }, { passive: true }),\n    useEventListener(window2, \"pointerup\", (e) => {\n      if (e.button === 0) {\n        const path = e.composedPath();\n        e.composedPath = () => path;\n        fallback = window2.setTimeout(() => listener(e), 50);\n      }\n    }, { passive: true }),\n    detectIframe && useEventListener(window2, \"blur\", (event) => {\n      var _a2;\n      const el = unrefElement(target);\n      if (((_a2 = window2.document.activeElement) == null ? void 0 : _a2.tagName) === \"IFRAME\" && !(el == null ? void 0 : el.contains(window2.document.activeElement)))\n        handler(event);\n    })\n  ].filter(Boolean);\n  const stop = () => cleanup.forEach((fn) => fn());\n  return stop;\n}\nconst _global = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nconst globalKey = \"__vueuse_ssr_handlers__\";\n_global[globalKey] = _global[globalKey] || {};\n_global[globalKey];\nvar __defProp$5 = Object.defineProperty;\nvar __defProps$1 = Object.defineProperties;\nvar __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$5 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$5 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$5 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$5 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$5.call(b, prop))\n      __defNormalProp$5(a, prop, b[prop]);\n  if (__getOwnPropSymbols$5)\n    for (var prop of __getOwnPropSymbols$5(b)) {\n      if (__propIsEnum$5.call(b, prop))\n        __defNormalProp$5(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$1 = (a, b) => __defProps$1(a, __getOwnPropDescs$1(b));\nconst defaultState = {\n  x: 0,\n  y: 0,\n  pointerId: 0,\n  pressure: 0,\n  tiltX: 0,\n  tiltY: 0,\n  width: 0,\n  height: 0,\n  twist: 0,\n  pointerType: null\n};\nconst keys = /* @__PURE__ */ Object.keys(defaultState);\nfunction usePointer(options = {}) {\n  const {\n    target = defaultWindow\n  } = options;\n  const isInside = ref(false);\n  const state = ref(options.initialValue || {});\n  Object.assign(state.value, defaultState, state.value);\n  const handler = (event) => {\n    isInside.value = true;\n    if (options.pointerTypes && !options.pointerTypes.includes(event.pointerType))\n      return;\n    state.value = objectPick(event, keys, false);\n  };\n  if (target) {\n    useEventListener(target, \"pointerdown\", handler, { passive: true });\n    useEventListener(target, \"pointermove\", handler, { passive: true });\n    useEventListener(target, \"pointerleave\", () => isInside.value = false, { passive: true });\n  }\n  return __spreadProps$1(__spreadValues$5({}, toRefs(state)), {\n    isInside\n  });\n}\nvar SwipeDirection;\n(function(SwipeDirection2) {\n  SwipeDirection2[\"UP\"] = \"UP\";\n  SwipeDirection2[\"RIGHT\"] = \"RIGHT\";\n  SwipeDirection2[\"DOWN\"] = \"DOWN\";\n  SwipeDirection2[\"LEFT\"] = \"LEFT\";\n  SwipeDirection2[\"NONE\"] = \"NONE\";\n})(SwipeDirection || (SwipeDirection = {}));\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nconst _TransitionPresets = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\n__spreadValues({\n  linear: identity\n}, _TransitionPresets);\nconst _sfc_main$t = defineComponent({\n  props: {\n    modelValue: {\n      type: Boolean,\n      default: false\n    },\n    items: {\n      type: Array,\n      required: true\n    },\n    x: {\n      type: Number,\n      default: 0\n    },\n    y: {\n      type: Number,\n      default: 0\n    },\n    isNested: {\n      type: Boolean,\n      default: false\n    },\n    isFlipped: {\n      type: Object,\n      default: () => ({ x: false, y: false })\n    },\n    flippable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"click\", \"update:modelValue\"],\n  setup(props, { emit }) {\n    let activeMenuResetTimeout = null;\n    const el = ref(null);\n    const activeMenu = ref(-1);\n    const height = ref(0);\n    const rootIsFlipped = ref({ x: false, y: false });\n    const flippedX = computed(() => props.flippable && (rootIsFlipped.value.x || props.isFlipped.x));\n    const flippedY = computed(() => props.flippable && (rootIsFlipped.value.y || props.isFlipped.y));\n    const styles = computed(() => {\n      const s = {};\n      if (!props.isNested) {\n        s.top = (flippedY.value ? props.y - height.value : props.y) + \"px\";\n        s.left = props.x + \"px\";\n      }\n      return s;\n    });\n    const classes = computed(() => {\n      return {\n        \"--flipped-x\": flippedX.value,\n        \"--flipped-y\": flippedY.value,\n        \"--nested\": props.isNested\n      };\n    });\n    const itemsWithHoverProperty = computed(() => props.items.map((i) => ({ ...i, hover: false })));\n    watch([() => props.y, () => props.items], () => {\n      var _a2, _b, _c, _d;\n      height.value = props.items.length * 30;\n      const parentWidth = ((_b = (_a2 = el.value) == null ? void 0 : _a2.parentElement) == null ? void 0 : _b.offsetWidth) ?? 0;\n      const parentHeight = ((_d = (_c = el.value) == null ? void 0 : _c.parentElement) == null ? void 0 : _d.offsetHeight) ?? 0;\n      rootIsFlipped.value.x = !props.isNested && props.x > parentWidth * 0.75;\n      rootIsFlipped.value.y = !props.isNested && props.y + height.value > parentHeight - 20;\n    });\n    onClickOutside(el, () => {\n      if (props.modelValue) {\n        emit(\"update:modelValue\", false);\n      }\n    });\n    const onClick = (item) => {\n      if (!item.submenu && item.value) {\n        emit(\"click\", item.value);\n        emit(\"update:modelValue\", false);\n      }\n    };\n    const onChildClick = (value) => {\n      emit(\"click\", value);\n      activeMenu.value = -1;\n      if (!props.isNested) {\n        emit(\"update:modelValue\", false);\n      }\n    };\n    const onMouseEnter = (event, index) => {\n      if (props.items[index].submenu) {\n        activeMenu.value = index;\n        if (activeMenuResetTimeout !== null) {\n          clearTimeout(activeMenuResetTimeout);\n          activeMenuResetTimeout = null;\n        }\n      }\n    };\n    const onMouseLeave = (event, index) => {\n      if (props.items[index].submenu) {\n        activeMenuResetTimeout = window.setTimeout(() => {\n          activeMenu.value = -1;\n          activeMenuResetTimeout = null;\n        }, 200);\n      }\n    };\n    return {\n      el,\n      activeMenu,\n      flippedX,\n      flippedY,\n      styles,\n      classes,\n      itemsWithHoverProperty,\n      onClick,\n      onChildClick,\n      onClickOutside,\n      onMouseEnter,\n      onMouseLeave\n    };\n  }\n});\nconst _hoisted_1$p = [\"onMouseenter\", \"onMouseleave\", \"onClick\"];\nconst _hoisted_2$j = { class: \"flex-fill\" };\nconst _hoisted_3$f = {\n  key: 0,\n  class: \"__submenu-icon\",\n  style: { \"line-height\": \"1em\" }\n};\nconst _hoisted_4$d = /* @__PURE__ */ createElementVNode(\"svg\", {\n  width: \"13\",\n  height: \"13\",\n  viewBox: \"-60 120 250 250\"\n}, [\n  /* @__PURE__ */ createElementVNode(\"path\", {\n    d: \"M160.875 279.5625 L70.875 369.5625 L70.875 189.5625 L160.875 279.5625 Z\",\n    stroke: \"none\",\n    fill: \"white\"\n  })\n], -1);\nconst _hoisted_5$7 = [\n  _hoisted_4$d\n];\nfunction _sfc_render$s(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_context_menu = resolveComponent(\"context-menu\", true);\n  return openBlock(), createBlock(Transition, { name: \"slide-fade\" }, {\n    default: withCtx(() => [\n      withDirectives(createElementVNode(\"div\", {\n        ref: \"el\",\n        class: normalizeClass([\"baklava-context-menu\", _ctx.classes]),\n        style: normalizeStyle(_ctx.styles)\n      }, [\n        (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.itemsWithHoverProperty, (item, index) => {\n          return openBlock(), createElementBlock(Fragment, null, [\n            item.isDivider ? (openBlock(), createElementBlock(\"div\", {\n              key: `d-${index}`,\n              class: \"divider\"\n            })) : (openBlock(), createElementBlock(\"div\", {\n              key: `i-${index}`,\n              class: normalizeClass([\"item\", { \"submenu\": !!item.submenu, \"--disabled\": !!item.disabled }]),\n              onMouseenter: ($event) => _ctx.onMouseEnter($event, index),\n              onMouseleave: ($event) => _ctx.onMouseLeave($event, index),\n              onClick: withModifiers(($event) => _ctx.onClick(item), [\"stop\", \"prevent\"])\n            }, [\n              createElementVNode(\"div\", _hoisted_2$j, toDisplayString(item.label), 1),\n              item.submenu ? (openBlock(), createElementBlock(\"div\", _hoisted_3$f, _hoisted_5$7)) : createCommentVNode(\"\", true),\n              item.submenu ? (openBlock(), createBlock(_component_context_menu, {\n                key: 1,\n                value: _ctx.activeMenu === index,\n                items: item.submenu,\n                \"is-nested\": true,\n                \"is-flipped\": { x: _ctx.flippedX, y: _ctx.flippedY },\n                flippable: _ctx.flippable,\n                onClick: _ctx.onChildClick\n              }, null, 8, [\"value\", \"items\", \"is-flipped\", \"flippable\", \"onClick\"])) : createCommentVNode(\"\", true)\n            ], 42, _hoisted_1$p))\n          ], 64);\n        }), 256))\n      ], 6), [\n        [vShow, _ctx.modelValue]\n      ])\n    ]),\n    _: 1\n  });\n}\nconst ContextMenu = /* @__PURE__ */ _export_sfc(_sfc_main$t, [[\"render\", _sfc_render$s]]);\nconst _sfc_main$s = {};\nconst _hoisted_1$o = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$i = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$e = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"1\"\n}, null, -1);\nconst _hoisted_4$c = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"19\",\n  r: \"1\"\n}, null, -1);\nconst _hoisted_5$6 = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"5\",\n  r: \"1\"\n}, null, -1);\nconst _hoisted_6$4 = [\n  _hoisted_2$i,\n  _hoisted_3$e,\n  _hoisted_4$c,\n  _hoisted_5$6\n];\nfunction _sfc_render$r(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$o, _hoisted_6$4);\n}\nconst VerticalDots = /* @__PURE__ */ _export_sfc(_sfc_main$s, [[\"render\", _sfc_render$r]]);\nconst _sfc_main$r = defineComponent({\n  props: {\n    node: {\n      type: Object,\n      required: true\n    },\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const { viewModel } = useViewModel();\n    const hoveredOver = inject(\"hoveredOver\");\n    const el = ref(null);\n    const isConnected = computed(() => props.intf.connectionCount > 0);\n    const classes = computed(() => ({\n      \"--input\": props.intf.isInput,\n      \"--output\": !props.intf.isInput,\n      \"--connected\": isConnected.value\n    }));\n    const showComponent = computed(\n      () => props.intf.component && props.intf.connectionCount === 0 && (props.intf.isInput || !props.intf.port)\n    );\n    const startHover = () => {\n      hoveredOver(props.intf);\n    };\n    const endHover = () => {\n      hoveredOver(void 0);\n    };\n    const onRender = () => {\n      if (el.value) {\n        viewModel.value.hooks.renderInterface.execute({ intf: props.intf, el: el.value });\n      }\n    };\n    const openSidebar = () => {\n      const sidebar = viewModel.value.displayedGraph.sidebar;\n      sidebar.nodeId = props.node.id;\n      sidebar.optionName = props.intf.name;\n      sidebar.visible = true;\n    };\n    onMounted(onRender);\n    onUpdated(onRender);\n    return { el, isConnected, classes, showComponent, startHover, endHover, openSidebar };\n  }\n});\nconst _hoisted_1$n = [\"id\"];\nconst _hoisted_2$h = {\n  key: 2,\n  class: \"align-middle\"\n};\nfunction _sfc_render$q(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    id: _ctx.intf.id,\n    ref: \"el\",\n    class: normalizeClass([\"baklava-node-interface\", _ctx.classes])\n  }, [\n    _ctx.intf.port ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"__port\",\n      onPointerover: _cache[0] || (_cache[0] = (...args) => _ctx.startHover && _ctx.startHover(...args)),\n      onPointerout: _cache[1] || (_cache[1] = (...args) => _ctx.endHover && _ctx.endHover(...args))\n    }, null, 32)) : createCommentVNode(\"\", true),\n    _ctx.showComponent ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.intf.component), {\n      key: 1,\n      modelValue: _ctx.intf.value,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => _ctx.intf.value = $event),\n      node: _ctx.node,\n      intf: _ctx.intf,\n      onOpenSidebar: _ctx.openSidebar\n    }, null, 40, [\"modelValue\", \"node\", \"intf\", \"onOpenSidebar\"])) : (openBlock(), createElementBlock(\"span\", _hoisted_2$h, toDisplayString(_ctx.intf.name), 1))\n  ], 10, _hoisted_1$n);\n}\nconst NodeInterface = /* @__PURE__ */ _export_sfc(_sfc_main$r, [[\"render\", _sfc_render$q]]);\nconst _hoisted_1$m = [\"id\", \"data-node-type\"];\nconst _hoisted_2$g = [\"onPointerdown\"];\nconst _hoisted_3$d = { class: \"__title-label\" };\nconst _hoisted_4$b = { class: \"__menu\" };\nconst _hoisted_5$5 = [\"onKeydown\"];\nconst _hoisted_6$3 = { class: \"__content\" };\nconst _hoisted_7$1 = { class: \"__outputs\" };\nconst _hoisted_8$1 = { class: \"__inputs\" };\nconst _sfc_main$q = /* @__PURE__ */ defineComponent({\n  __name: \"Node\",\n  props: {\n    node: null,\n    selected: { type: Boolean, default: false }\n  },\n  emits: [\"select\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const { viewModel } = useViewModel();\n    const { graph, switchGraph } = useGraph();\n    const dragMove = useDragMove(toRef(props.node, \"position\"));\n    const el = ref(null);\n    const renaming = ref(false);\n    const tempName = ref(\"\");\n    const renameInputEl = ref(null);\n    const showContextMenu = ref(false);\n    const contextMenuItems = computed(() => {\n      const items = [\n        { value: \"rename\", label: \"Rename\" },\n        { value: \"delete\", label: \"Delete\" }\n      ];\n      if (props.node.type.startsWith(GRAPH_NODE_TYPE_PREFIX)) {\n        items.push({ value: \"editSubgraph\", label: \"Edit Subgraph\" });\n      }\n      return items;\n    });\n    const classes = computed(() => ({\n      \"--selected\": props.selected,\n      \"--dragging\": dragMove.dragging.value,\n      \"--two-column\": !!props.node.twoColumn\n    }));\n    const styles = computed(() => {\n      var _a2, _b;\n      return {\n        top: `${((_a2 = props.node.position) == null ? void 0 : _a2.y) ?? 0}px`,\n        left: `${((_b = props.node.position) == null ? void 0 : _b.x) ?? 0}px`,\n        width: `${props.node.width ?? 200}px`\n      };\n    });\n    const displayedInputs = computed(() => Object.values(props.node.inputs).filter((ni) => !ni.hidden));\n    const displayedOutputs = computed(() => Object.values(props.node.outputs).filter((ni) => !ni.hidden));\n    const select = () => {\n      emit(\"select\");\n    };\n    const startDrag = (ev) => {\n      dragMove.onPointerDown(ev);\n      document.addEventListener(\"pointermove\", dragMove.onPointerMove);\n      document.addEventListener(\"pointerup\", stopDrag);\n      select();\n    };\n    const stopDrag = () => {\n      dragMove.onPointerUp();\n      document.removeEventListener(\"pointermove\", dragMove.onPointerMove);\n      document.removeEventListener(\"pointerup\", stopDrag);\n    };\n    const openContextMenu = () => {\n      showContextMenu.value = true;\n    };\n    const onContextMenuClick = async (action) => {\n      var _a2;\n      switch (action) {\n        case \"delete\":\n          graph.value.removeNode(props.node);\n          break;\n        case \"rename\":\n          tempName.value = props.node.title;\n          renaming.value = true;\n          await nextTick();\n          (_a2 = renameInputEl.value) == null ? void 0 : _a2.focus();\n          break;\n        case \"editSubgraph\":\n          switchGraph(props.node.template);\n          break;\n      }\n    };\n    const doneRenaming = () => {\n      props.node.title = tempName.value;\n      renaming.value = false;\n    };\n    const onRender = () => {\n      if (el.value) {\n        viewModel.value.hooks.renderNode.execute({ node: props.node, el: el.value });\n      }\n    };\n    onMounted(onRender);\n    onUpdated(onRender);\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        id: __props.node.id,\n        ref_key: \"el\",\n        ref: el,\n        class: normalizeClass([\"baklava-node\", unref(classes)]),\n        style: normalizeStyle(unref(styles)),\n        \"data-node-type\": __props.node.type,\n        onPointerdown: select\n      }, [\n        createElementVNode(\"div\", {\n          class: \"__title\",\n          onPointerdown: withModifiers(startDrag, [\"self\", \"stop\"])\n        }, [\n          !renaming.value ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [\n            createElementVNode(\"div\", _hoisted_3$d, toDisplayString(__props.node.title), 1),\n            createElementVNode(\"div\", _hoisted_4$b, [\n              createVNode(VerticalDots, {\n                class: \"--clickable\",\n                onClick: openContextMenu\n              }),\n              createVNode(ContextMenu, {\n                modelValue: showContextMenu.value,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => showContextMenu.value = $event),\n                x: 0,\n                y: 0,\n                items: unref(contextMenuItems),\n                onClick: onContextMenuClick\n              }, null, 8, [\"modelValue\", \"items\"])\n            ])\n          ], 64)) : withDirectives((openBlock(), createElementBlock(\"input\", {\n            key: 1,\n            ref_key: \"renameInputEl\",\n            ref: renameInputEl,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => tempName.value = $event),\n            type: \"text\",\n            class: \"baklava-input\",\n            placeholder: \"Node Name\",\n            onBlur: doneRenaming,\n            onKeydown: withKeys(doneRenaming, [\"enter\"])\n          }, null, 40, _hoisted_5$5)), [\n            [vModelText, tempName.value]\n          ])\n        ], 40, _hoisted_2$g),\n        createElementVNode(\"div\", _hoisted_6$3, [\n          createElementVNode(\"div\", _hoisted_7$1, [\n            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(displayedOutputs), (output) => {\n              return openBlock(), createBlock(NodeInterface, {\n                key: output.id,\n                node: __props.node,\n                intf: output\n              }, null, 8, [\"node\", \"intf\"]);\n            }), 128))\n          ]),\n          createElementVNode(\"div\", _hoisted_8$1, [\n            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(displayedInputs), (input) => {\n              return openBlock(), createBlock(NodeInterface, {\n                key: input.id,\n                node: __props.node,\n                intf: input\n              }, null, 8, [\"node\", \"intf\"]);\n            }), 128))\n          ])\n        ])\n      ], 46, _hoisted_1$m);\n    };\n  }\n});\nconst _sfc_main$p = defineComponent({\n  props: {\n    x1: {\n      type: Number,\n      required: true\n    },\n    y1: {\n      type: Number,\n      required: true\n    },\n    x2: {\n      type: Number,\n      required: true\n    },\n    y2: {\n      type: Number,\n      required: true\n    },\n    state: {\n      type: Number,\n      default: TemporaryConnectionState.NONE\n    },\n    isTemporary: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const { viewModel } = useViewModel();\n    const { graph } = useGraph();\n    const transform = (x, y) => {\n      const tx = (x + graph.value.panning.x) * graph.value.scaling;\n      const ty = (y + graph.value.panning.y) * graph.value.scaling;\n      return [tx, ty];\n    };\n    const d = computed(() => {\n      const [tx1, ty1] = transform(props.x1, props.y1);\n      const [tx2, ty2] = transform(props.x2, props.y2);\n      if (viewModel.value.settings.useStraightConnections) {\n        return `M ${tx1} ${ty1} L ${tx2} ${ty2}`;\n      } else {\n        const dx = 0.3 * Math.abs(tx1 - tx2);\n        return `M ${tx1} ${ty1} C ${tx1 + dx} ${ty1}, ${tx2 - dx} ${ty2}, ${tx2} ${ty2}`;\n      }\n    });\n    const classes = computed(() => ({\n      \"--temporary\": props.isTemporary,\n      \"--allowed\": props.state === TemporaryConnectionState.ALLOWED,\n      \"--forbidden\": props.state === TemporaryConnectionState.FORBIDDEN\n    }));\n    return { d, classes };\n  }\n});\nconst _hoisted_1$l = [\"d\"];\nfunction _sfc_render$p(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"path\", {\n    class: normalizeClass([\"baklava-connection\", _ctx.classes]),\n    d: _ctx.d\n  }, null, 10, _hoisted_1$l);\n}\nconst ConnectionView = /* @__PURE__ */ _export_sfc(_sfc_main$p, [[\"render\", _sfc_render$p]]);\nfunction getDomElementOfNode(node) {\n  return document.getElementById(node.id);\n}\nfunction getDomElements(ni) {\n  const interfaceDOM = document.getElementById(ni.id);\n  const portDOM = interfaceDOM == null ? void 0 : interfaceDOM.getElementsByClassName(\"__port\");\n  return {\n    node: (interfaceDOM == null ? void 0 : interfaceDOM.closest(\".baklava-node\")) ?? null,\n    interface: interfaceDOM,\n    port: portDOM && portDOM.length > 0 ? portDOM[0] : null\n  };\n}\nconst _sfc_main$o = defineComponent({\n  components: {\n    \"connection-view\": ConnectionView\n  },\n  props: {\n    connection: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const { graph } = useGraph();\n    let resizeObserver;\n    const d = ref({ x1: 0, y1: 0, x2: 0, y2: 0 });\n    const state = computed(\n      () => props.connection.isInDanger ? TemporaryConnectionState.FORBIDDEN : TemporaryConnectionState.NONE\n    );\n    const fromNodePosition = computed(() => {\n      var _a2;\n      return (_a2 = graph.value.findNodeById(props.connection.from.nodeId)) == null ? void 0 : _a2.position;\n    });\n    const toNodePosition = computed(() => {\n      var _a2;\n      return (_a2 = graph.value.findNodeById(props.connection.to.nodeId)) == null ? void 0 : _a2.position;\n    });\n    const getPortCoordinates2 = (resolved) => {\n      if (resolved.node && resolved.interface && resolved.port) {\n        return [\n          resolved.node.offsetLeft + resolved.interface.offsetLeft + resolved.port.offsetLeft + resolved.port.clientWidth / 2,\n          resolved.node.offsetTop + resolved.interface.offsetTop + resolved.port.offsetTop + resolved.port.clientHeight / 2\n        ];\n      } else {\n        return [0, 0];\n      }\n    };\n    const updateCoords = () => {\n      const from = getDomElements(props.connection.from);\n      const to = getDomElements(props.connection.to);\n      if (from.node && to.node) {\n        if (!resizeObserver) {\n          resizeObserver = new ResizeObserver(() => {\n            updateCoords();\n          });\n          resizeObserver.observe(from.node);\n          resizeObserver.observe(to.node);\n        }\n      }\n      const [x1, y1] = getPortCoordinates2(from);\n      const [x2, y2] = getPortCoordinates2(to);\n      d.value = { x1, y1, x2, y2 };\n    };\n    onMounted(async () => {\n      await nextTick();\n      updateCoords();\n    });\n    onBeforeUnmount(() => {\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    });\n    watch([fromNodePosition, toNodePosition], () => updateCoords(), { deep: true });\n    return { d, state };\n  }\n});\nfunction _sfc_render$o(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_connection_view = resolveComponent(\"connection-view\");\n  return openBlock(), createBlock(_component_connection_view, {\n    x1: _ctx.d.x1,\n    y1: _ctx.d.y1,\n    x2: _ctx.d.x2,\n    y2: _ctx.d.y2,\n    state: _ctx.state\n  }, null, 8, [\"x1\", \"y1\", \"x2\", \"y2\", \"state\"]);\n}\nconst ConnectionWrapper = /* @__PURE__ */ _export_sfc(_sfc_main$o, [[\"render\", _sfc_render$o]]);\nfunction getPortCoordinates(resolved) {\n  if (resolved.node && resolved.interface && resolved.port) {\n    return [\n      resolved.node.offsetLeft + resolved.interface.offsetLeft + resolved.port.offsetLeft + resolved.port.clientWidth / 2,\n      resolved.node.offsetTop + resolved.interface.offsetTop + resolved.port.offsetTop + resolved.port.clientHeight / 2\n    ];\n  } else {\n    return [0, 0];\n  }\n}\nconst _sfc_main$n = defineComponent({\n  components: {\n    \"connection-view\": ConnectionView\n  },\n  props: {\n    connection: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const status = computed(() => props.connection ? props.connection.status : TemporaryConnectionState.NONE);\n    const d = computed(() => {\n      if (!props.connection) {\n        return {\n          input: [0, 0],\n          output: [0, 0]\n        };\n      }\n      const start = getPortCoordinates(getDomElements(props.connection.from));\n      const end = props.connection.to ? getPortCoordinates(getDomElements(props.connection.to)) : [props.connection.mx || start[0], props.connection.my || start[1]];\n      if (props.connection.from.isInput) {\n        return {\n          input: end,\n          output: start\n        };\n      } else {\n        return {\n          input: start,\n          output: end\n        };\n      }\n    });\n    return { d, status };\n  }\n});\nfunction _sfc_render$n(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_connection_view = resolveComponent(\"connection-view\");\n  return openBlock(), createBlock(_component_connection_view, {\n    x1: _ctx.d.input[0],\n    y1: _ctx.d.input[1],\n    x2: _ctx.d.output[0],\n    y2: _ctx.d.output[1],\n    state: _ctx.status,\n    \"is-temporary\": \"\"\n  }, null, 8, [\"x1\", \"y1\", \"x2\", \"y2\", \"state\"]);\n}\nconst TemporaryConnection = /* @__PURE__ */ _export_sfc(_sfc_main$n, [[\"render\", _sfc_render$n]]);\nconst _sfc_main$m = defineComponent({\n  setup() {\n    const { graph } = useGraph();\n    const el = ref(null);\n    const width = ref(300);\n    const node = computed(() => {\n      const id = graph.value.sidebar.nodeId;\n      return graph.value.nodes.find((x) => x.id === id);\n    });\n    const styles = computed(() => ({\n      width: `${width.value}px`\n    }));\n    const displayedInterfaces = computed(() => {\n      if (!node.value) {\n        return [];\n      }\n      const allIntfs = [...Object.values(node.value.inputs), ...Object.values(node.value.outputs)];\n      return allIntfs.filter((intf) => intf.displayInSidebar && intf.component);\n    });\n    const close = () => {\n      graph.value.sidebar.visible = false;\n    };\n    const startResize = () => {\n      window.addEventListener(\"mousemove\", onMouseMove);\n      window.addEventListener(\n        \"mouseup\",\n        () => {\n          window.removeEventListener(\"mousemove\", onMouseMove);\n        },\n        { once: true }\n      );\n    };\n    const onMouseMove = (event) => {\n      var _a2, _b;\n      const maxwidth = ((_b = (_a2 = el.value) == null ? void 0 : _a2.parentElement) == null ? void 0 : _b.getBoundingClientRect().width) ?? 500;\n      width.value -= event.movementX;\n      if (width.value < 300) {\n        width.value = 300;\n      } else if (width.value > 0.9 * maxwidth) {\n        width.value = 0.9 * maxwidth;\n      }\n    };\n    return { el, graph, node, styles, displayedInterfaces, startResize, close };\n  }\n});\nconst _hoisted_1$k = { class: \"__header\" };\nconst _hoisted_2$f = { class: \"__node-name\" };\nfunction _sfc_render$m(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    class: normalizeClass([\"baklava-sidebar\", { \"--open\": _ctx.graph.sidebar.visible }]),\n    style: normalizeStyle(_ctx.styles)\n  }, [\n    createElementVNode(\"div\", {\n      class: \"__resizer\",\n      onMousedown: _cache[0] || (_cache[0] = (...args) => _ctx.startResize && _ctx.startResize(...args))\n    }, null, 32),\n    createElementVNode(\"div\", _hoisted_1$k, [\n      createElementVNode(\"button\", {\n        tabindex: \"-1\",\n        class: \"__close\",\n        onClick: _cache[1] || (_cache[1] = (...args) => _ctx.close && _ctx.close(...args))\n      }, \" × \"),\n      createElementVNode(\"div\", _hoisted_2$f, [\n        createElementVNode(\"b\", null, toDisplayString(_ctx.node ? _ctx.node.title : \"\"), 1)\n      ])\n    ]),\n    (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.displayedInterfaces, (intf) => {\n      return openBlock(), createElementBlock(\"div\", {\n        key: intf.id,\n        class: \"__interface\"\n      }, [\n        (openBlock(), createBlock(resolveDynamicComponent(intf.component), {\n          modelValue: intf.value,\n          \"onUpdate:modelValue\": ($event) => intf.value = $event,\n          node: _ctx.node,\n          intf\n        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"node\", \"intf\"]))\n      ]);\n    }), 128))\n  ], 6);\n}\nconst Sidebar = /* @__PURE__ */ _export_sfc(_sfc_main$m, [[\"render\", _sfc_render$m]]);\nconst _sfc_main$l = defineComponent({\n  setup() {\n    const { viewModel } = useViewModel();\n    const { graph } = useGraph();\n    const canvas = ref(null);\n    const showViewBounds = ref(false);\n    let ctx;\n    let dragging = false;\n    let bounds = { x1: 0, y1: 0, x2: 0, y2: 0 };\n    const updateCanvas = () => {\n      var _a2, _b;\n      if (!ctx) {\n        return;\n      }\n      const nodeCoords = /* @__PURE__ */ new Map();\n      const nodeDomElements = /* @__PURE__ */ new Map();\n      for (const n of graph.value.nodes) {\n        const domElement = getDomElementOfNode(n);\n        const width = (domElement == null ? void 0 : domElement.clientWidth) ?? 0;\n        const height = (domElement == null ? void 0 : domElement.clientHeight) ?? 0;\n        const posX = ((_a2 = n.position) == null ? void 0 : _a2.x) ?? 0;\n        const posY = ((_b = n.position) == null ? void 0 : _b.y) ?? 0;\n        nodeCoords.set(n, {\n          x1: posX,\n          y1: posY,\n          x2: posX + width,\n          y2: posY + height\n        });\n        nodeDomElements.set(n, domElement);\n      }\n      const newBounds = {\n        x1: Number.MAX_SAFE_INTEGER,\n        y1: Number.MAX_SAFE_INTEGER,\n        x2: Number.MIN_SAFE_INTEGER,\n        y2: Number.MIN_SAFE_INTEGER\n      };\n      for (const nc of nodeCoords.values()) {\n        if (nc.x1 < newBounds.x1) {\n          newBounds.x1 = nc.x1;\n        }\n        if (nc.y1 < newBounds.y1) {\n          newBounds.y1 = nc.y1;\n        }\n        if (nc.x2 > newBounds.x2) {\n          newBounds.x2 = nc.x2;\n        }\n        if (nc.y2 > newBounds.y2) {\n          newBounds.y2 = nc.y2;\n        }\n      }\n      const padding = 50;\n      newBounds.x1 -= padding;\n      newBounds.y1 -= padding;\n      newBounds.x2 += padding;\n      newBounds.y2 += padding;\n      bounds = newBounds;\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n      ctx.strokeStyle = \"white\";\n      for (const c of graph.value.connections) {\n        const [origX1, origY1] = getPortCoordinates(getDomElements(c.from));\n        const [origX2, origY2] = getPortCoordinates(getDomElements(c.to));\n        const [x1, y1] = transformCoordinates(origX1, origY1);\n        const [x2, y2] = transformCoordinates(origX2, origY2);\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        if (viewModel.value.settings.useStraightConnections) {\n          ctx.lineTo(x2, y2);\n        } else {\n          const dx = 0.3 * Math.abs(x1 - x2);\n          ctx.bezierCurveTo(x1 + dx, y1, x2 - dx, y2, x2, y2);\n        }\n        ctx.stroke();\n      }\n      ctx.strokeStyle = \"lightgray\";\n      for (const [n, nc] of nodeCoords.entries()) {\n        const [x1, y1] = transformCoordinates(nc.x1, nc.y1);\n        const [x2, y2] = transformCoordinates(nc.x2, nc.y2);\n        ctx.fillStyle = getNodeColor(nodeDomElements.get(n));\n        ctx.beginPath();\n        ctx.rect(x1, y1, x2 - x1, y2 - y1);\n        ctx.fill();\n        ctx.stroke();\n      }\n      if (showViewBounds.value) {\n        const viewBounds = getViewBounds();\n        const [x1, y1] = transformCoordinates(viewBounds.x1, viewBounds.y1);\n        const [x2, y2] = transformCoordinates(viewBounds.x2, viewBounds.y2);\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.2)\";\n        ctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n      }\n    };\n    const transformCoordinates = (origX, origY) => {\n      return [\n        (origX - bounds.x1) / (bounds.x2 - bounds.x1) * ctx.canvas.clientWidth,\n        (origY - bounds.y1) / (bounds.y2 - bounds.y1) * ctx.canvas.clientHeight\n      ];\n    };\n    const reverseTransform = (thisX, thisY) => {\n      return [\n        thisX * (bounds.x2 - bounds.x1) / ctx.canvas.clientWidth + bounds.x1,\n        thisY * (bounds.y2 - bounds.y1) / ctx.canvas.clientHeight + bounds.y1\n      ];\n    };\n    const getNodeColor = (domElement) => {\n      if (domElement) {\n        const content = domElement.querySelector(\".__content\");\n        if (content) {\n          const contentColor = getComputedColor(content);\n          if (contentColor) {\n            return contentColor;\n          }\n        }\n        const nodeColor = getComputedColor(domElement);\n        if (nodeColor) {\n          return nodeColor;\n        }\n      }\n      return \"gray\";\n    };\n    const getComputedColor = (domElement) => {\n      const c = getComputedStyle(domElement).backgroundColor;\n      if (c && c !== \"rgba(0, 0, 0, 0)\") {\n        return c;\n      }\n    };\n    const getViewBounds = () => {\n      const parentWidth = canvas.value.parentElement.offsetWidth;\n      const parentHeight = canvas.value.parentElement.offsetHeight;\n      const x2 = parentWidth / graph.value.scaling - graph.value.panning.x;\n      const y2 = parentHeight / graph.value.scaling - graph.value.panning.y;\n      return { x1: -graph.value.panning.x, y1: -graph.value.panning.y, x2, y2 };\n    };\n    const mousedown = (ev) => {\n      if (ev.button === 0) {\n        dragging = true;\n        mousemove(ev);\n      }\n    };\n    const mousemove = (ev) => {\n      if (dragging) {\n        const [cx, cy] = reverseTransform(ev.offsetX, ev.offsetY);\n        const viewBounds = getViewBounds();\n        const dx = (viewBounds.x1 - viewBounds.x2) / 2;\n        const dy = (viewBounds.y1 - viewBounds.y2) / 2;\n        graph.value.panning.x = -(cx + dx);\n        graph.value.panning.y = -(cy + dy);\n      }\n    };\n    const mouseup = () => {\n      dragging = false;\n    };\n    const mouseenter = () => {\n      showViewBounds.value = true;\n    };\n    const mouseleave = () => {\n      showViewBounds.value = false;\n      mouseup();\n    };\n    onMounted(() => {\n      ctx = canvas.value.getContext(\"2d\");\n      ctx.imageSmoothingQuality = \"high\";\n      updateCanvas();\n    });\n    return { canvas, showViewBounds, mousedown, mousemove, mouseup, mouseenter, mouseleave };\n  }\n});\nfunction _sfc_render$l(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"canvas\", {\n    ref: \"canvas\",\n    class: \"baklava-minimap\",\n    onMouseenter: _cache[0] || (_cache[0] = (...args) => _ctx.mouseenter && _ctx.mouseenter(...args)),\n    onMouseleave: _cache[1] || (_cache[1] = (...args) => _ctx.mouseleave && _ctx.mouseleave(...args)),\n    onMousedown: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.mousedown && _ctx.mousedown(...args), [\"self\"])),\n    onMousemove: _cache[3] || (_cache[3] = withModifiers((...args) => _ctx.mousemove && _ctx.mousemove(...args), [\"self\"])),\n    onMouseup: _cache[4] || (_cache[4] = (...args) => _ctx.mouseup && _ctx.mouseup(...args))\n  }, null, 544);\n}\nconst Minimap = /* @__PURE__ */ _export_sfc(_sfc_main$l, [[\"render\", _sfc_render$l]]);\nconst _sfc_main$k = defineComponent({\n  components: { ContextMenu, VerticalDots },\n  props: {\n    type: {\n      type: String,\n      required: true\n    },\n    title: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props) {\n    const { viewModel } = useViewModel();\n    const { switchGraph } = useGraph();\n    const showContextMenu = ref(false);\n    const hasContextMenu = computed(() => props.type.startsWith(GRAPH_NODE_TYPE_PREFIX));\n    const contextMenuItems = [\n      { label: \"Edit Subgraph\", value: \"editSubgraph\" },\n      { label: \"Delete Subgraph\", value: \"deleteSubgraph\" }\n    ];\n    const openContextMenu = () => {\n      showContextMenu.value = true;\n    };\n    const onContextMenuClick = (action) => {\n      const graphTemplateId = props.type.substring(GRAPH_NODE_TYPE_PREFIX.length);\n      const graphTemplate = viewModel.value.editor.graphTemplates.find((gt) => gt.id === graphTemplateId);\n      if (!graphTemplate) {\n        return;\n      }\n      switch (action) {\n        case \"editSubgraph\":\n          switchGraph(graphTemplate);\n          break;\n        case \"deleteSubgraph\":\n          viewModel.value.editor.removeGraphTemplate(graphTemplate);\n          break;\n      }\n    };\n    return { showContextMenu, hasContextMenu, contextMenuItems, openContextMenu, onContextMenuClick };\n  }\n});\nconst _hoisted_1$j = [\"data-node-type\"];\nconst _hoisted_2$e = { class: \"__title\" };\nconst _hoisted_3$c = { class: \"__title-label\" };\nconst _hoisted_4$a = {\n  key: 0,\n  class: \"__menu\"\n};\nfunction _sfc_render$k(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_vertical_dots = resolveComponent(\"vertical-dots\");\n  const _component_context_menu = resolveComponent(\"context-menu\");\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"baklava-node --palette\",\n    \"data-node-type\": _ctx.type\n  }, [\n    createElementVNode(\"div\", _hoisted_2$e, [\n      createElementVNode(\"div\", _hoisted_3$c, toDisplayString(_ctx.title), 1),\n      _ctx.hasContextMenu ? (openBlock(), createElementBlock(\"div\", _hoisted_4$a, [\n        createVNode(_component_vertical_dots, {\n          class: \"--clickable\",\n          onPointerdown: _cache[0] || (_cache[0] = withModifiers(() => {\n          }, [\"stop\", \"prevent\"])),\n          onClick: withModifiers(_ctx.openContextMenu, [\"stop\", \"prevent\"])\n        }, null, 8, [\"onClick\"]),\n        createVNode(_component_context_menu, {\n          modelValue: _ctx.showContextMenu,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => _ctx.showContextMenu = $event),\n          x: -100,\n          y: 0,\n          items: _ctx.contextMenuItems,\n          onClick: _ctx.onContextMenuClick,\n          onPointerdown: _cache[2] || (_cache[2] = withModifiers(() => {\n          }, [\"stop\", \"prevent\"]))\n        }, null, 8, [\"modelValue\", \"items\", \"onClick\"])\n      ])) : createCommentVNode(\"\", true)\n    ])\n  ], 8, _hoisted_1$j);\n}\nconst PaletteEntry = /* @__PURE__ */ _export_sfc(_sfc_main$k, [[\"render\", _sfc_render$k]]);\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    getRandomValues = typeof crypto !== \"undefined\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n    }\n  }\n  return getRandomValues(rnds8);\n}\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 256).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nconst randomUUID = typeof crypto !== \"undefined\" && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nconst native = {\n  randomUUID\n};\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)();\n  rnds[6] = rnds[6] & 15 | 64;\n  rnds[8] = rnds[8] & 63 | 128;\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nconst _sfc_main$j = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const onClick = () => {\n      if (props.intf.callback) {\n        props.intf.callback();\n      }\n    };\n    return { onClick };\n  }\n});\nconst _hoisted_1$i = [\"title\"];\nfunction _sfc_render$j(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"button\", {\n    class: \"baklava-button --block\",\n    title: _ctx.intf.name,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, toDisplayString(_ctx.intf.name), 9, _hoisted_1$i);\n}\nconst ButtonInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$j, [[\"render\", _sfc_render$j]]);\nclass ButtonInterface extends NodeInterface$1 {\n  constructor(name, callback) {\n    super(name, void 0);\n    this.component = markRaw(ButtonInterfaceComponent);\n    this.callback = callback;\n    this.setPort(false);\n  }\n}\nconst _sfc_main$i = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  }\n});\nconst _hoisted_1$h = [\"title\"];\nconst _hoisted_2$d = /* @__PURE__ */ createElementVNode(\"div\", { class: \"__checkmark-container\" }, [\n  /* @__PURE__ */ createElementVNode(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\"\n  }, [\n    /* @__PURE__ */ createElementVNode(\"path\", {\n      class: \"__checkmark\",\n      d: \"M 6 5 L 6 10 L 16 10\",\n      transform: \"rotate(-45 10 10)\"\n    })\n  ])\n], -1);\nconst _hoisted_3$b = { class: \"__label\" };\nfunction _sfc_render$i(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([\"baklava-checkbox\", { \"--checked\": _ctx.intf.value }]),\n    title: _ctx.intf.name,\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.intf.value = !_ctx.intf.value)\n  }, [\n    _hoisted_2$d,\n    createElementVNode(\"div\", _hoisted_3$b, toDisplayString(_ctx.intf.name), 1)\n  ], 10, _hoisted_1$h);\n}\nconst CheckboxInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$i, [[\"render\", _sfc_render$i]]);\nclass CheckboxInterface extends NodeInterface$1 {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(CheckboxInterfaceComponent);\n  }\n}\nconst MAX_STRING_LENGTH = 9;\nfunction isValidator(intf) {\n  return \"validate\" in intf;\n}\nclass BaseNumericInterface extends NodeInterface$1 {\n  constructor(name, value, min, max) {\n    super(name, value);\n    this.min = min;\n    this.max = max;\n  }\n  validate(v) {\n    return (!this.min || v >= this.min) && (!this.max || v <= this.max);\n  }\n}\nconst useBaseNumericInterface = (intf, precision = 3) => {\n  const inputEl = ref(null);\n  const editMode = ref(false);\n  const invalid = ref(false);\n  const tempValue = ref(\"0\");\n  const stringRepresentation = computed(() => {\n    const s = intf.value.value.toFixed(precision);\n    return s.length > MAX_STRING_LENGTH ? intf.value.value.toExponential(MAX_STRING_LENGTH - 5) : s;\n  });\n  const validate = (v) => {\n    if (Number.isNaN(v)) {\n      return false;\n    } else if (isValidator(intf.value)) {\n      return intf.value.validate(v);\n    } else {\n      return true;\n    }\n  };\n  const setValue = (newValue) => {\n    if (validate(newValue)) {\n      intf.value.value = newValue;\n    }\n  };\n  watch(tempValue, () => {\n    invalid.value = false;\n  });\n  const enterEditMode = async () => {\n    tempValue.value = intf.value.value.toFixed(precision);\n    editMode.value = true;\n    await nextTick();\n    if (inputEl.value) {\n      inputEl.value.focus();\n    }\n  };\n  const leaveEditMode = () => {\n    const v = parseFloat(tempValue.value);\n    if (!validate(v)) {\n      invalid.value = true;\n    } else {\n      setValue(v);\n      editMode.value = false;\n    }\n  };\n  return {\n    editMode,\n    invalid,\n    tempValue,\n    inputEl,\n    stringRepresentation,\n    validate,\n    setValue,\n    enterEditMode,\n    leaveEditMode\n  };\n};\nconst _sfc_main$h = {};\nconst _hoisted_1$g = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$c = /* @__PURE__ */ createElementVNode(\"polyline\", { points: \"6 9 12 15 18 9\" }, null, -1);\nconst _hoisted_3$a = [\n  _hoisted_2$c\n];\nfunction _sfc_render$h(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$g, _hoisted_3$a);\n}\nconst Arrow = /* @__PURE__ */ _export_sfc(_sfc_main$h, [[\"render\", _sfc_render$h]]);\nconst _sfc_main$g = defineComponent({\n  components: {\n    \"i-arrow\": Arrow\n  },\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const baseNumericInterface = useBaseNumericInterface(toRef(props, \"intf\"), 0);\n    const increment = () => {\n      baseNumericInterface.setValue(props.intf.value + 1);\n    };\n    const decrement = () => {\n      baseNumericInterface.setValue(props.intf.value - 1);\n    };\n    return { ...baseNumericInterface, increment, decrement };\n  }\n});\nconst _hoisted_1$f = { class: \"baklava-num-input\" };\nconst _hoisted_2$b = [\"title\"];\nconst _hoisted_3$9 = { class: \"__value\" };\nconst _hoisted_4$9 = {\n  key: 1,\n  class: \"__content\"\n};\nfunction _sfc_render$g(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_i_arrow = resolveComponent(\"i-arrow\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$f, [\n    createElementVNode(\"div\", {\n      class: \"__button --dec\",\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.decrement && _ctx.decrement(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ]),\n    !_ctx.editMode ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"__content\",\n      onClick: _cache[1] || (_cache[1] = (...args) => _ctx.enterEditMode && _ctx.enterEditMode(...args))\n    }, [\n      createElementVNode(\"div\", {\n        class: \"__label\",\n        title: _ctx.intf.name\n      }, toDisplayString(_ctx.intf.name), 9, _hoisted_2$b),\n      createElementVNode(\"div\", _hoisted_3$9, toDisplayString(_ctx.stringRepresentation), 1)\n    ])) : (openBlock(), createElementBlock(\"div\", _hoisted_4$9, [\n      withDirectives(createElementVNode(\"input\", {\n        ref: \"inputEl\",\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => _ctx.tempValue = $event),\n        type: \"number\",\n        class: normalizeClass([\"baklava-input\", { \"--invalid\": _ctx.invalid }]),\n        style: { \"text-align\": \"right\" },\n        onBlur: _cache[3] || (_cache[3] = (...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args)),\n        onKeydown: _cache[4] || (_cache[4] = withKeys((...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args), [\"enter\"]))\n      }, null, 34), [\n        [vModelText, _ctx.tempValue]\n      ])\n    ])),\n    createElementVNode(\"div\", {\n      class: \"__button --inc\",\n      onClick: _cache[5] || (_cache[5] = (...args) => _ctx.increment && _ctx.increment(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ])\n  ]);\n}\nconst IntegerInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$g, [[\"render\", _sfc_render$g]]);\nclass IntegerInterface extends BaseNumericInterface {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(IntegerInterfaceComponent);\n  }\n  validate(v) {\n    return Number.isInteger(v) && super.validate(v);\n  }\n}\nconst _sfc_main$f = defineComponent({\n  components: {\n    \"i-arrow\": Arrow\n  },\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const baseNumericInterface = useBaseNumericInterface(toRef(props, \"intf\"));\n    const increment = () => {\n      baseNumericInterface.setValue(props.intf.value + 0.1);\n    };\n    const decrement = () => {\n      baseNumericInterface.setValue(props.intf.value - 0.1);\n    };\n    return { ...baseNumericInterface, increment, decrement };\n  }\n});\nconst _hoisted_1$e = { class: \"baklava-num-input\" };\nconst _hoisted_2$a = [\"title\"];\nconst _hoisted_3$8 = { class: \"__value\" };\nconst _hoisted_4$8 = {\n  key: 1,\n  class: \"__content\"\n};\nfunction _sfc_render$f(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_i_arrow = resolveComponent(\"i-arrow\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$e, [\n    createElementVNode(\"div\", {\n      class: \"__button --dec\",\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.decrement && _ctx.decrement(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ]),\n    !_ctx.editMode ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"__content\",\n      onClick: _cache[1] || (_cache[1] = (...args) => _ctx.enterEditMode && _ctx.enterEditMode(...args))\n    }, [\n      createElementVNode(\"div\", {\n        class: \"__label\",\n        title: _ctx.intf.name\n      }, toDisplayString(_ctx.intf.name), 9, _hoisted_2$a),\n      createElementVNode(\"div\", _hoisted_3$8, toDisplayString(_ctx.stringRepresentation), 1)\n    ])) : (openBlock(), createElementBlock(\"div\", _hoisted_4$8, [\n      withDirectives(createElementVNode(\"input\", {\n        ref: \"inputEl\",\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => _ctx.tempValue = $event),\n        type: \"number\",\n        class: normalizeClass([\"baklava-input\", { \"--invalid\": _ctx.invalid }]),\n        style: { \"text-align\": \"right\" },\n        onBlur: _cache[3] || (_cache[3] = (...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args)),\n        onKeydown: _cache[4] || (_cache[4] = withKeys((...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args), [\"enter\"]))\n      }, null, 34), [\n        [vModelText, _ctx.tempValue]\n      ])\n    ])),\n    createElementVNode(\"div\", {\n      class: \"__button --inc\",\n      onClick: _cache[5] || (_cache[5] = (...args) => _ctx.increment && _ctx.increment(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ])\n  ]);\n}\nconst NumberInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$f, [[\"render\", _sfc_render$f]]);\nclass NumberInterface extends BaseNumericInterface {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(NumberInterfaceComponent);\n  }\n}\nconst _sfc_main$e = defineComponent({\n  components: {\n    \"i-arrow\": Arrow\n  },\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const el = ref(null);\n    const open = ref(false);\n    const selectedItem = computed(\n      () => props.intf.items.find(\n        (v) => typeof v === \"string\" ? v === props.intf.value : v.value === props.intf.value\n      )\n    );\n    const selectedText = computed(() => {\n      if (selectedItem.value) {\n        return typeof selectedItem.value === \"string\" ? selectedItem.value : selectedItem.value.text;\n      } else {\n        return \"\";\n      }\n    });\n    const setSelected = (item) => {\n      props.intf.value = typeof item === \"string\" ? item : item.value;\n    };\n    onClickOutside(el, () => {\n      open.value = false;\n    });\n    return { el, open, selectedItem, selectedText, setSelected };\n  }\n});\nconst _hoisted_1$d = [\"title\"];\nconst _hoisted_2$9 = { class: \"__selected\" };\nconst _hoisted_3$7 = { class: \"__text\" };\nconst _hoisted_4$7 = { class: \"__icon\" };\nconst _hoisted_5$4 = { class: \"__dropdown\" };\nconst _hoisted_6$2 = { class: \"item --header\" };\nconst _hoisted_7 = [\"onClick\"];\nfunction _sfc_render$e(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_i_arrow = resolveComponent(\"i-arrow\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    class: normalizeClass([\"baklava-select\", { \"--open\": _ctx.open }]),\n    title: _ctx.intf.name,\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.open = !_ctx.open)\n  }, [\n    createElementVNode(\"div\", _hoisted_2$9, [\n      createElementVNode(\"div\", _hoisted_3$7, toDisplayString(_ctx.selectedText), 1),\n      createElementVNode(\"div\", _hoisted_4$7, [\n        createVNode(_component_i_arrow)\n      ])\n    ]),\n    createVNode(Transition, { name: \"slide-fade\" }, {\n      default: withCtx(() => [\n        withDirectives(createElementVNode(\"div\", _hoisted_5$4, [\n          createElementVNode(\"div\", _hoisted_6$2, toDisplayString(_ctx.intf.name), 1),\n          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.intf.items, (item, i) => {\n            return openBlock(), createElementBlock(\"div\", {\n              key: i,\n              class: normalizeClass([\"item\", { \"--active\": item === _ctx.selectedItem }]),\n              onClick: ($event) => _ctx.setSelected(item)\n            }, toDisplayString(typeof item === \"string\" ? item : item.text), 11, _hoisted_7);\n          }), 128))\n        ], 512), [\n          [vShow, _ctx.open]\n        ])\n      ]),\n      _: 1\n    })\n  ], 10, _hoisted_1$d);\n}\nconst SelectInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$e, [[\"render\", _sfc_render$e]]);\nclass SelectInterface extends NodeInterface$1 {\n  constructor(name, value, items) {\n    super(name, value);\n    this.component = markRaw(SelectInterfaceComponent);\n    this.items = items;\n  }\n}\nconst _sfc_main$d = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const el = ref(null);\n    const baseNumericInterface = useBaseNumericInterface(toRef(props, \"intf\"));\n    const didSlide = ref(false);\n    const isMouseDown = ref(false);\n    const percentage = computed(\n      () => Math.min(100, Math.max(0, props.intf.value * 100 / (props.intf.max - props.intf.min)))\n    );\n    const mousedown = () => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      isMouseDown.value = true;\n    };\n    const mouseup = () => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      if (!didSlide.value) {\n        void baseNumericInterface.enterEditMode();\n      }\n      isMouseDown.value = false;\n      didSlide.value = false;\n    };\n    const mouseleave = (ev) => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      if (isMouseDown.value) {\n        if (ev.offsetX >= el.value.clientWidth) {\n          baseNumericInterface.setValue(props.intf.max);\n        } else if (ev.offsetX <= 0) {\n          baseNumericInterface.setValue(props.intf.min);\n        }\n      }\n      isMouseDown.value = false;\n      didSlide.value = false;\n    };\n    const mousemove = (ev) => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      const v = Math.max(\n        props.intf.min,\n        Math.min(\n          props.intf.max,\n          (props.intf.max - props.intf.min) * (ev.offsetX / el.value.clientWidth) + props.intf.min\n        )\n      );\n      if (isMouseDown.value) {\n        baseNumericInterface.setValue(v);\n        didSlide.value = true;\n      }\n    };\n    return { ...baseNumericInterface, el, percentage, mousedown, mouseup, mousemove, mouseleave };\n  }\n});\nconst _hoisted_1$c = {\n  key: 0,\n  class: \"__content\"\n};\nconst _hoisted_2$8 = { class: \"__label\" };\nconst _hoisted_3$6 = { class: \"__value\" };\nconst _hoisted_4$6 = {\n  key: 1,\n  class: \"__content\"\n};\nfunction _sfc_render$d(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    class: normalizeClass([\"baklava-slider\", { \"baklava-ignore-mouse\": !_ctx.editMode }]),\n    onPointerdown: _cache[3] || (_cache[3] = (...args) => _ctx.mousedown && _ctx.mousedown(...args)),\n    onPointerup: _cache[4] || (_cache[4] = (...args) => _ctx.mouseup && _ctx.mouseup(...args)),\n    onPointermove: _cache[5] || (_cache[5] = (...args) => _ctx.mousemove && _ctx.mousemove(...args)),\n    onPointerleave: _cache[6] || (_cache[6] = (...args) => _ctx.mouseleave && _ctx.mouseleave(...args))\n  }, [\n    createElementVNode(\"div\", {\n      class: \"__slider\",\n      style: normalizeStyle({ width: _ctx.percentage + \"%\" })\n    }, null, 4),\n    !_ctx.editMode ? (openBlock(), createElementBlock(\"div\", _hoisted_1$c, [\n      createElementVNode(\"div\", _hoisted_2$8, toDisplayString(_ctx.intf.name), 1),\n      createElementVNode(\"div\", _hoisted_3$6, toDisplayString(_ctx.stringRepresentation), 1)\n    ])) : (openBlock(), createElementBlock(\"div\", _hoisted_4$6, [\n      withDirectives(createElementVNode(\"input\", {\n        ref: \"inputEl\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => _ctx.tempValue = $event),\n        type: \"number\",\n        class: normalizeClass([\"baklava-input\", { \"--invalid\": _ctx.invalid }]),\n        style: { \"text-align\": \"right\" },\n        onBlur: _cache[1] || (_cache[1] = (...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args)),\n        onKeydown: _cache[2] || (_cache[2] = withKeys((...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args), [\"enter\"]))\n      }, null, 34), [\n        [vModelText, _ctx.tempValue]\n      ])\n    ]))\n  ], 34);\n}\nconst SliderInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$d, [[\"render\", _sfc_render$d]]);\nclass SliderInterface extends BaseNumericInterface {\n  constructor(name, value, min, max) {\n    super(name, value, min, max);\n    this.component = markRaw(SliderInterfaceComponent);\n    this.min = min;\n    this.max = max;\n  }\n}\nconst _sfc_main$c = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  }\n});\nfunction _sfc_render$c(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", null, toDisplayString(_ctx.intf.value), 1);\n}\nconst TextInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$c, [[\"render\", _sfc_render$c]]);\nclass TextInterface extends NodeInterface$1 {\n  constructor(name, value) {\n    super(name, value);\n    this.component = markRaw(TextInterfaceComponent);\n    this.setPort(false);\n  }\n}\nconst _sfc_main$b = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    },\n    modelValue: {\n      type: String,\n      required: true\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const v = computed({\n      get: () => props.modelValue,\n      set: (v2) => {\n        emit(\"update:modelValue\", v2);\n      }\n    });\n    return { v };\n  }\n});\nconst _hoisted_1$b = [\"placeholder\", \"title\"];\nfunction _sfc_render$b(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", null, [\n    withDirectives(createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => _ctx.v = $event),\n      type: \"text\",\n      class: \"baklava-input\",\n      placeholder: _ctx.intf.name,\n      title: _ctx.intf.name\n    }, null, 8, _hoisted_1$b), [\n      [vModelText, _ctx.v]\n    ])\n  ]);\n}\nconst TextInputInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$b, [[\"render\", _sfc_render$b]]);\nclass TextInputInterface extends NodeInterface$1 {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(TextInputInterfaceComponent);\n  }\n}\nconst SUBGRAPH_INPUT_NODE_TYPE = \"__baklava_SubgraphInputNode\";\nconst SUBGRAPH_OUTPUT_NODE_TYPE = \"__baklava_SubgraphOutputNode\";\nconst SubgraphInputNode = defineNode({\n  type: SUBGRAPH_INPUT_NODE_TYPE,\n  title: \"Subgraph Input\",\n  inputs: {\n    name: () => new TextInputInterface(\"Name\", \"Input\").setPort(false)\n  },\n  outputs: {\n    placeholder: () => new NodeInterface$1(\"Connection\", void 0)\n  },\n  onCreate() {\n    this.graphInterfaceId = v4();\n  }\n});\nconst SubgraphOutputNode = defineNode({\n  type: SUBGRAPH_OUTPUT_NODE_TYPE,\n  title: \"Subgraph Output\",\n  inputs: {\n    name: () => new TextInputInterface(\"Name\", \"Output\").setPort(false),\n    placeholder: () => new NodeInterface$1(\"Connection\", void 0)\n  },\n  onCreate() {\n    this.graphInterfaceId = v4();\n  }\n});\nfunction checkRecursion(editor, currentGraph, graphNodeType) {\n  if (!currentGraph.template) {\n    return false;\n  }\n  if (getGraphNodeTypeString(currentGraph.template) === graphNodeType) {\n    return true;\n  }\n  const template = editor.graphTemplates.find((t) => getGraphNodeTypeString(t) === graphNodeType);\n  if (!template) {\n    return false;\n  }\n  const containedGraphNodes = template.nodes.filter((n) => n.type.startsWith(GRAPH_NODE_TYPE_PREFIX));\n  return containedGraphNodes.some((n) => checkRecursion(editor, currentGraph, n.type));\n}\nconst _sfc_main$a = defineComponent({\n  components: { PaletteEntry },\n  setup() {\n    const { viewModel } = useViewModel();\n    const { x: mouseX, y: mouseY } = usePointer();\n    const { transform } = useTransform();\n    const editorEl = inject(\"editorEl\");\n    const draggedNode = ref(null);\n    const categories = computed(() => {\n      const nodeTypeEntries = Array.from(viewModel.value.editor.nodeTypes.entries());\n      const categoryNames = new Set(nodeTypeEntries.map(([, ni]) => ni.category));\n      const categories2 = [];\n      for (const c of categoryNames.values()) {\n        let nodeTypesInCategory = nodeTypeEntries.filter(([, ni]) => ni.category === c);\n        if (viewModel.value.displayedGraph.template) {\n          nodeTypesInCategory = nodeTypesInCategory.filter(\n            ([nt]) => !checkRecursion(viewModel.value.editor, viewModel.value.displayedGraph, nt)\n          );\n        } else {\n          nodeTypesInCategory = nodeTypesInCategory.filter(\n            ([nt]) => ![SUBGRAPH_INPUT_NODE_TYPE, SUBGRAPH_OUTPUT_NODE_TYPE].includes(nt)\n          );\n        }\n        if (nodeTypesInCategory.length > 0) {\n          categories2.push({\n            name: c,\n            nodeTypes: Object.fromEntries(nodeTypesInCategory)\n          });\n        }\n      }\n      categories2.sort((a, b) => {\n        if (a.name === \"default\") {\n          return -1;\n        } else if (b.name === \"default\") {\n          return 1;\n        } else {\n          return a.name > b.name ? 1 : -1;\n        }\n      });\n      return categories2;\n    });\n    const draggedNodeStyles = computed(() => {\n      if (!draggedNode.value || !(editorEl == null ? void 0 : editorEl.value)) {\n        return {};\n      }\n      const { left, top } = editorEl.value.getBoundingClientRect();\n      return {\n        top: `${mouseY.value - top}px`,\n        left: `${mouseX.value - left}px`\n      };\n    });\n    const onDragStart = (type, nodeInformation) => {\n      draggedNode.value = {\n        type,\n        nodeInformation\n      };\n      const onDragEnd = () => {\n        const instance = reactive(new nodeInformation.type());\n        viewModel.value.displayedGraph.addNode(instance);\n        const rect = editorEl.value.getBoundingClientRect();\n        const [x, y] = transform(mouseX.value - rect.left, mouseY.value - rect.top);\n        instance.position.x = x;\n        instance.position.y = y;\n        draggedNode.value = null;\n        document.removeEventListener(\"pointerup\", onDragEnd);\n      };\n      document.addEventListener(\"pointerup\", onDragEnd);\n    };\n    return { draggedNode, categories, draggedNodeStyles, onDragStart, mouseX, mouseY };\n  }\n});\nconst _hoisted_1$a = { class: \"baklava-node-palette\" };\nconst _hoisted_2$7 = { key: 0 };\nfunction _sfc_render$a(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PaletteEntry = resolveComponent(\"PaletteEntry\");\n  return openBlock(), createElementBlock(Fragment, null, [\n    createElementVNode(\"div\", _hoisted_1$a, [\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.categories, (c) => {\n        return openBlock(), createElementBlock(\"section\", {\n          key: c.name\n        }, [\n          c.name !== \"default\" ? (openBlock(), createElementBlock(\"h1\", _hoisted_2$7, toDisplayString(c.name), 1)) : createCommentVNode(\"\", true),\n          (openBlock(true), createElementBlock(Fragment, null, renderList(c.nodeTypes, (ni, nt) => {\n            return openBlock(), createBlock(_component_PaletteEntry, {\n              key: nt,\n              type: nt,\n              title: ni.title,\n              onPointerdown: ($event) => _ctx.onDragStart(nt, ni)\n            }, null, 8, [\"type\", \"title\", \"onPointerdown\"]);\n          }), 128))\n        ]);\n      }), 128))\n    ]),\n    createVNode(Transition, { name: \"fade\" }, {\n      default: withCtx(() => [\n        _ctx.draggedNode ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          class: \"baklava-dragged-node\",\n          style: normalizeStyle(_ctx.draggedNodeStyles)\n        }, [\n          createVNode(_component_PaletteEntry, {\n            type: _ctx.draggedNode.type,\n            title: _ctx.draggedNode.nodeInformation.title\n          }, null, 8, [\"type\", \"title\"])\n        ], 4)) : createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ], 64);\n}\nconst NodePalette = /* @__PURE__ */ _export_sfc(_sfc_main$a, [[\"render\", _sfc_render$a]]);\nconst SAVE_SUBGRAPH_COMMAND = \"SAVE_SUBGRAPH\";\nfunction registerSaveSubgraphCommand(displayedGraph, handler) {\n  const saveSubgraph = () => {\n    const graph = displayedGraph.value;\n    if (!graph.template) {\n      throw new Error(\"Graph template property not set\");\n    }\n    const interfaceConnections = [];\n    const inputs = [];\n    const inputNodes = graph.nodes.filter((n) => n.type === SUBGRAPH_INPUT_NODE_TYPE);\n    for (const n of inputNodes) {\n      const connections = graph.connections.filter((c) => c.from === n.outputs.placeholder);\n      connections.forEach((c) => {\n        inputs.push({\n          id: n.graphInterfaceId,\n          name: n.inputs.name.value,\n          nodeInterfaceId: c.to.id\n        });\n      });\n      interfaceConnections.push(...connections);\n    }\n    const outputs = [];\n    const outputNodes = graph.nodes.filter((n) => n.type === SUBGRAPH_OUTPUT_NODE_TYPE);\n    for (const n of outputNodes) {\n      const connections = graph.connections.filter((c) => c.to === n.inputs.placeholder);\n      connections.forEach((c) => {\n        outputs.push({\n          id: n.graphInterfaceId,\n          name: n.inputs.name.value,\n          nodeInterfaceId: c.from.id\n        });\n      });\n      interfaceConnections.push(...connections);\n    }\n    const innerConnections = graph.connections.filter((c) => !interfaceConnections.includes(c));\n    const nodes = graph.nodes.filter(\n      (n) => n.type !== SUBGRAPH_INPUT_NODE_TYPE && n.type !== SUBGRAPH_OUTPUT_NODE_TYPE\n    );\n    graph.template.update({\n      inputs,\n      outputs,\n      connections: innerConnections.map((c) => ({ id: c.id, from: c.from.id, to: c.to.id })),\n      nodes: nodes.map((n) => n.save())\n    });\n    graph.template.panning = graph.panning;\n    graph.template.scaling = graph.scaling;\n  };\n  handler.registerCommand(SAVE_SUBGRAPH_COMMAND, {\n    canExecute: () => {\n      var _a2;\n      return displayedGraph.value !== ((_a2 = displayedGraph.value.editor) == null ? void 0 : _a2.graph);\n    },\n    execute: saveSubgraph\n  });\n}\nconst CREATE_SUBGRAPH_COMMAND = \"CREATE_SUBGRAPH\";\nconst IGNORE_NODE_TYPES = [SUBGRAPH_INPUT_NODE_TYPE, SUBGRAPH_OUTPUT_NODE_TYPE];\nfunction registerCreateSubgraphCommand(displayedGraph, handler, switchGraph) {\n  const canCreateSubgraph = () => {\n    return displayedGraph.value.selectedNodes.filter((n) => !IGNORE_NODE_TYPES.includes(n.type)).length > 0;\n  };\n  const createSubgraph = () => {\n    const graph = displayedGraph.value;\n    const editor = displayedGraph.value.editor;\n    if (graph.selectedNodes.length === 0) {\n      return;\n    }\n    const selectedNodes = graph.selectedNodes.filter((n) => !IGNORE_NODE_TYPES.includes(n.type));\n    const selectedNodesInputs = selectedNodes.flatMap((n) => Object.values(n.inputs));\n    const selectedNodesOutputs = selectedNodes.flatMap((n) => Object.values(n.outputs));\n    const inputConnections = graph.connections.filter(\n      (c) => !selectedNodesOutputs.includes(c.from) && selectedNodesInputs.includes(c.to)\n    );\n    const outputConnections = graph.connections.filter(\n      (c) => selectedNodesOutputs.includes(c.from) && !selectedNodesInputs.includes(c.to)\n    );\n    const innerConnections = graph.connections.filter(\n      (c) => selectedNodesOutputs.includes(c.from) && selectedNodesInputs.includes(c.to)\n    );\n    const inputInterfaces = inputConnections.map((c) => c.to);\n    const outputInterfaces = outputConnections.map((c) => c.from);\n    const interfaceIdMap = /* @__PURE__ */ new Map();\n    const graphInputs = [];\n    for (const i of inputInterfaces) {\n      const newId = v4();\n      interfaceIdMap.set(i.id, newId);\n      graphInputs.push({ id: newId, nodeInterfaceId: i.id, name: i.name });\n    }\n    const graphOutputs = [];\n    for (const i of outputInterfaces) {\n      const newId = v4();\n      interfaceIdMap.set(i.id, newId);\n      graphOutputs.push({ id: newId, nodeInterfaceId: i.id, name: i.name });\n    }\n    const subgraphTemplate = reactive(\n      new GraphTemplate(\n        {\n          connections: innerConnections.map((c) => ({ id: c.id, from: c.from.id, to: c.to.id })),\n          inputs: graphInputs,\n          outputs: graphOutputs,\n          nodes: selectedNodes.map((n) => n.save())\n        },\n        editor\n      )\n    );\n    editor.addGraphTemplate(subgraphTemplate);\n    const nt = editor.nodeTypes.get(getGraphNodeTypeString(subgraphTemplate));\n    if (!nt) {\n      throw new Error(\"Unable to create subgraph: Could not find corresponding graph node type\");\n    }\n    const node = reactive(new nt.type());\n    graph.addNode(node);\n    const averageX = Math.round(\n      selectedNodes.map((n) => n.position.x).reduce((p, c) => p + c, 0) / selectedNodes.length\n    );\n    const averageY = Math.round(\n      selectedNodes.map((n) => n.position.y).reduce((p, c) => p + c, 0) / selectedNodes.length\n    );\n    node.position.x = averageX;\n    node.position.y = averageY;\n    inputConnections.forEach((c) => {\n      graph.removeConnection(c);\n      graph.addConnection(c.from, node.inputs[interfaceIdMap.get(c.to.id)]);\n    });\n    outputConnections.forEach((c) => {\n      graph.removeConnection(c);\n      graph.addConnection(node.outputs[interfaceIdMap.get(c.from.id)], c.to);\n    });\n    selectedNodes.forEach((n) => graph.removeNode(n));\n    if (handler.canExecuteCommand(SAVE_SUBGRAPH_COMMAND)) {\n      handler.executeCommand(SAVE_SUBGRAPH_COMMAND);\n    }\n    switchGraph(subgraphTemplate);\n    displayedGraph.value.panning = { ...graph.panning };\n    displayedGraph.value.scaling = graph.scaling;\n  };\n  handler.registerCommand(CREATE_SUBGRAPH_COMMAND, {\n    canExecute: canCreateSubgraph,\n    execute: createSubgraph\n  });\n}\nconst DELETE_NODES_COMMAND = \"DELETE_NODES\";\nfunction registerDeleteNodesCommand(displayedGraph, handler) {\n  handler.registerCommand(DELETE_NODES_COMMAND, {\n    canExecute: () => displayedGraph.value.selectedNodes.length > 0,\n    execute() {\n      displayedGraph.value.selectedNodes.forEach((n) => displayedGraph.value.removeNode(n));\n    }\n  });\n  handler.registerHotkey([\"Delete\"], DELETE_NODES_COMMAND);\n}\nconst SWITCH_TO_MAIN_GRAPH_COMMAND = \"SWITCH_TO_MAIN_GRAPH\";\nfunction registerSwitchToMainGraphCommand(displayedGraph, handler, switchGraph) {\n  handler.registerCommand(SWITCH_TO_MAIN_GRAPH_COMMAND, {\n    canExecute: () => displayedGraph.value !== displayedGraph.value.editor.graph,\n    execute: () => {\n      handler.executeCommand(SAVE_SUBGRAPH_COMMAND);\n      switchGraph(displayedGraph.value.editor.graph);\n    }\n  });\n}\nfunction registerGraphCommands(displayedGraph, handler, switchGraph) {\n  registerDeleteNodesCommand(displayedGraph, handler);\n  registerCreateSubgraphCommand(displayedGraph, handler, switchGraph);\n  registerSaveSubgraphCommand(displayedGraph, handler);\n  registerSwitchToMainGraphCommand(displayedGraph, handler, switchGraph);\n}\nclass NodeStep {\n  constructor(type, data) {\n    this.type = type;\n    if (type === \"addNode\") {\n      this.nodeId = data;\n    } else {\n      this.nodeState = data;\n    }\n  }\n  undo(graph) {\n    if (this.type === \"addNode\") {\n      this.removeNode(graph);\n    } else {\n      this.addNode(graph);\n    }\n  }\n  redo(graph) {\n    if (this.type === \"addNode\" && this.nodeState) {\n      this.addNode(graph);\n    } else if (this.type === \"removeNode\" && this.nodeId) {\n      this.removeNode(graph);\n    }\n  }\n  addNode(graph) {\n    const nodeType = graph.editor.nodeTypes.get(this.nodeState.type);\n    if (!nodeType) {\n      return;\n    }\n    const n = new nodeType.type();\n    graph.addNode(n);\n    n.load(this.nodeState);\n    this.nodeId = n.id;\n  }\n  removeNode(graph) {\n    const node = graph.nodes.find((n) => n.id === this.nodeId);\n    if (!node) {\n      return;\n    }\n    this.nodeState = node.save();\n    graph.removeNode(node);\n  }\n}\nclass ConnectionStep {\n  constructor(type, data) {\n    this.type = type;\n    if (type === \"addConnection\") {\n      this.connectionId = data;\n    } else {\n      const d = data;\n      this.connectionState = {\n        id: d.id,\n        from: d.from.id,\n        to: d.to.id\n      };\n    }\n  }\n  undo(graph) {\n    if (this.type === \"addConnection\") {\n      this.removeConnection(graph);\n    } else {\n      this.addConnection(graph);\n    }\n  }\n  redo(graph) {\n    if (this.type === \"addConnection\" && this.connectionState) {\n      this.addConnection(graph);\n    } else if (this.type === \"removeConnection\" && this.connectionId) {\n      this.removeConnection(graph);\n    }\n  }\n  addConnection(graph) {\n    const fromIntf = graph.findNodeInterface(this.connectionState.from);\n    const toIntf = graph.findNodeInterface(this.connectionState.to);\n    if (!fromIntf || !toIntf) {\n      return;\n    }\n    graph.addConnection(fromIntf, toIntf);\n  }\n  removeConnection(graph) {\n    const connection = graph.connections.find((c) => c.id === this.connectionId);\n    if (!connection) {\n      return;\n    }\n    this.connectionState = {\n      id: connection.id,\n      from: connection.from.id,\n      to: connection.to.id\n    };\n    graph.removeConnection(connection);\n  }\n}\nclass TransactionStep {\n  constructor(steps) {\n    this.type = \"transaction\";\n    if (steps.length === 0) {\n      throw new Error(\"Can't create a transaction with no steps\");\n    }\n    this.steps = steps;\n  }\n  undo(graph) {\n    for (let i = this.steps.length - 1; i >= 0; i--) {\n      this.steps[i].undo(graph);\n    }\n  }\n  redo(graph) {\n    for (let i = 0; i < this.steps.length; i++) {\n      this.steps[i].redo(graph);\n    }\n  }\n}\nconst UNDO_COMMAND = \"UNDO\";\nconst REDO_COMMAND = \"REDO\";\nconst START_TRANSACTION_COMMAND = \"START_TRANSACTION\";\nconst COMMIT_TRANSACTION_COMMAND = \"COMMIT_TRANSACTION\";\nfunction useHistory(graph, commandHandler) {\n  const token = Symbol(\"HistoryToken\");\n  const maxSteps = ref(200);\n  const steps = ref([]);\n  const changeBySelf = ref(false);\n  const currentIndex = ref(-1);\n  const activeTransaction = ref(false);\n  const transactionSteps = ref([]);\n  const addStep = (step) => {\n    if (changeBySelf.value) {\n      return;\n    }\n    if (activeTransaction.value) {\n      transactionSteps.value.push(step);\n    } else {\n      if (currentIndex.value !== steps.value.length - 1) {\n        steps.value = steps.value.slice(0, currentIndex.value + 1);\n      }\n      steps.value.push(step);\n      currentIndex.value++;\n      while (steps.value.length > maxSteps.value) {\n        steps.value.shift();\n      }\n    }\n  };\n  const startTransaction = () => {\n    activeTransaction.value = true;\n  };\n  const commitTransaction = () => {\n    activeTransaction.value = false;\n    if (transactionSteps.value.length > 0) {\n      addStep(new TransactionStep(transactionSteps.value));\n      transactionSteps.value = [];\n    }\n  };\n  const canUndo = () => steps.value.length !== 0 && currentIndex.value !== -1;\n  const undo = () => {\n    if (!canUndo()) {\n      return;\n    }\n    changeBySelf.value = true;\n    steps.value[currentIndex.value--].undo(graph.value);\n    changeBySelf.value = false;\n  };\n  const canRedo = () => steps.value.length !== 0 && currentIndex.value < steps.value.length - 1;\n  const redo = () => {\n    if (!canRedo()) {\n      return;\n    }\n    changeBySelf.value = true;\n    steps.value[++currentIndex.value].redo(graph.value);\n    changeBySelf.value = false;\n  };\n  watch(\n    graph,\n    (newGraph, oldGraph) => {\n      if (oldGraph) {\n        oldGraph.events.addNode.unsubscribe(token);\n        oldGraph.events.removeNode.unsubscribe(token);\n        oldGraph.events.addConnection.unsubscribe(token);\n        oldGraph.events.removeConnection.unsubscribe(token);\n      }\n      if (newGraph) {\n        newGraph.events.addNode.subscribe(token, (node) => {\n          addStep(new NodeStep(\"addNode\", node.id));\n        });\n        newGraph.events.removeNode.subscribe(token, (node) => {\n          addStep(new NodeStep(\"removeNode\", node.save()));\n        });\n        newGraph.events.addConnection.subscribe(token, (conn) => {\n          addStep(new ConnectionStep(\"addConnection\", conn.id));\n        });\n        newGraph.events.removeConnection.subscribe(token, (conn) => {\n          addStep(new ConnectionStep(\"removeConnection\", conn));\n        });\n      }\n    },\n    { immediate: true }\n  );\n  commandHandler.registerCommand(UNDO_COMMAND, {\n    canExecute: canUndo,\n    execute: undo\n  });\n  commandHandler.registerCommand(REDO_COMMAND, {\n    canExecute: canRedo,\n    execute: redo\n  });\n  commandHandler.registerCommand(START_TRANSACTION_COMMAND, {\n    canExecute: () => !activeTransaction.value,\n    execute: startTransaction\n  });\n  commandHandler.registerCommand(COMMIT_TRANSACTION_COMMAND, {\n    canExecute: () => activeTransaction.value,\n    execute: commitTransaction\n  });\n  commandHandler.registerHotkey([\"Control\", \"z\"], UNDO_COMMAND);\n  commandHandler.registerHotkey([\"Control\", \"y\"], REDO_COMMAND);\n  return reactive({\n    maxSteps\n  });\n}\nconst COPY_COMMAND = \"COPY\";\nconst PASTE_COMMAND = \"PASTE\";\nconst CLEAR_CLIPBOARD_COMMAND = \"CLEAR_CLIPBOARD\";\nfunction useClipboard(displayedGraph, editor, commandHandler) {\n  const token = Symbol(\"ClipboardToken\");\n  const nodeBuffer = ref(\"\");\n  const connectionBuffer = ref(\"\");\n  const isEmpty = computed(() => !nodeBuffer.value);\n  const clear = () => {\n    nodeBuffer.value = \"\";\n    connectionBuffer.value = \"\";\n  };\n  const copy = () => {\n    const interfacesOfSelectedNodes = displayedGraph.value.selectedNodes.flatMap((n) => [\n      ...Object.values(n.inputs),\n      ...Object.values(n.outputs)\n    ]);\n    const connections = displayedGraph.value.connections.filter(\n      (conn) => interfacesOfSelectedNodes.includes(conn.from) || interfacesOfSelectedNodes.includes(conn.to)\n    ).map((conn) => ({ from: conn.from.id, to: conn.to.id }));\n    connectionBuffer.value = JSON.stringify(connections);\n    nodeBuffer.value = JSON.stringify(displayedGraph.value.selectedNodes.map((n) => n.save()));\n  };\n  const findInterface = (nodes, id, io) => {\n    for (const n of nodes) {\n      let intf;\n      if (!io || io === \"input\") {\n        intf = Object.values(n.inputs).find((intf2) => intf2.id === id);\n      }\n      if (!intf && (!io || io === \"output\")) {\n        intf = Object.values(n.outputs).find((intf2) => intf2.id === id);\n      }\n      if (intf) {\n        return intf;\n      }\n    }\n    return void 0;\n  };\n  const paste = () => {\n    if (isEmpty.value) {\n      return;\n    }\n    const idmap = /* @__PURE__ */ new Map();\n    const parsedNodeBuffer = JSON.parse(nodeBuffer.value);\n    const parsedConnectionBuffer = JSON.parse(connectionBuffer.value);\n    const newNodes = [];\n    const newConnections = [];\n    const graph = displayedGraph.value;\n    commandHandler.executeCommand(START_TRANSACTION_COMMAND);\n    for (const n of parsedNodeBuffer) {\n      const nodeType = editor.value.nodeTypes.get(n.type);\n      if (!nodeType) {\n        console.warn(`Node type ${n.type} not registered`);\n        return;\n      }\n      const copiedNode = new nodeType.type();\n      const generatedId = copiedNode.id;\n      newNodes.push(copiedNode);\n      const tapInterfaces = (intfs) => {\n        Object.values(intfs).forEach((intf) => {\n          intf.hooks.load.subscribe(token, (intfState) => {\n            const newIntfId = v4();\n            idmap.set(intfState.id, newIntfId);\n            intf.id = newIntfId;\n            intf.hooks.load.unsubscribe(token);\n            return intfState;\n          });\n        });\n      };\n      tapInterfaces(copiedNode.inputs);\n      tapInterfaces(copiedNode.outputs);\n      copiedNode.hooks.beforeLoad.subscribe(token, (nodeState) => {\n        const ns = nodeState;\n        if (ns.position) {\n          ns.position.x += 10;\n          ns.position.y += 10;\n        }\n        copiedNode.hooks.beforeLoad.unsubscribe(token);\n        return ns;\n      });\n      graph.addNode(copiedNode);\n      copiedNode.load(n);\n      copiedNode.id = generatedId;\n      idmap.set(n.id, generatedId);\n    }\n    for (const c of parsedConnectionBuffer) {\n      const fromIntf = findInterface(newNodes, idmap.get(c.from), \"output\");\n      const toIntf = findInterface(newNodes, idmap.get(c.to), \"input\");\n      if (!fromIntf || !toIntf) {\n        continue;\n      }\n      const newConnection = graph.addConnection(fromIntf, toIntf);\n      if (newConnection) {\n        newConnections.push(newConnection);\n      }\n    }\n    commandHandler.executeCommand(COMMIT_TRANSACTION_COMMAND);\n    return {\n      newNodes,\n      newConnections\n    };\n  };\n  commandHandler.registerCommand(COPY_COMMAND, {\n    canExecute: () => true,\n    execute: copy\n  });\n  commandHandler.registerHotkey([\"Control\", \"c\"], COPY_COMMAND);\n  commandHandler.registerCommand(PASTE_COMMAND, {\n    canExecute: () => !isEmpty.value,\n    execute: paste\n  });\n  commandHandler.registerHotkey([\"Control\", \"v\"], PASTE_COMMAND);\n  commandHandler.registerCommand(CLEAR_CLIPBOARD_COMMAND, {\n    canExecute: () => true,\n    execute: clear\n  });\n  return reactive({ isEmpty });\n}\nconst OPEN_SIDEBAR_COMMAND = \"OPEN_SIDEBAR\";\nfunction registerOpenSidebarCommand(displayedGraph, handler) {\n  handler.registerCommand(OPEN_SIDEBAR_COMMAND, {\n    execute: (nodeId) => {\n      displayedGraph.value.sidebar.nodeId = nodeId;\n      displayedGraph.value.sidebar.visible = true;\n    },\n    canExecute: () => true\n  });\n}\nfunction registerSidebarCommands(displayedGraph, handler) {\n  registerOpenSidebarCommand(displayedGraph, handler);\n}\nconst commandList = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  CREATE_SUBGRAPH_COMMAND,\n  DELETE_NODES_COMMAND,\n  SAVE_SUBGRAPH_COMMAND,\n  SWITCH_TO_MAIN_GRAPH_COMMAND,\n  COMMIT_TRANSACTION_COMMAND,\n  START_TRANSACTION_COMMAND,\n  UNDO_COMMAND,\n  REDO_COMMAND,\n  CLEAR_CLIPBOARD_COMMAND,\n  COPY_COMMAND,\n  PASTE_COMMAND,\n  OPEN_SIDEBAR_COMMAND\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst _sfc_main$9 = {};\nconst _hoisted_1$9 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$6 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$5 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1\" }, null, -1);\nconst _hoisted_4$5 = [\n  _hoisted_2$6,\n  _hoisted_3$5\n];\nfunction _sfc_render$9(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$9, _hoisted_4$5);\n}\nconst ArrowBackUp = /* @__PURE__ */ _export_sfc(_sfc_main$9, [[\"render\", _sfc_render$9]]);\nconst _sfc_main$8 = {};\nconst _hoisted_1$8 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$5 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$4 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M15 13l4 -4l-4 -4m4 4h-11a4 4 0 0 0 0 8h1\" }, null, -1);\nconst _hoisted_4$4 = [\n  _hoisted_2$5,\n  _hoisted_3$4\n];\nfunction _sfc_render$8(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$8, _hoisted_4$4);\n}\nconst ArrowForwardUp = /* @__PURE__ */ _export_sfc(_sfc_main$8, [[\"render\", _sfc_render$8]]);\nconst _sfc_main$7 = {};\nconst _hoisted_1$7 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$4 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$3 = /* @__PURE__ */ createElementVNode(\"line\", {\n  x1: \"5\",\n  y1: \"12\",\n  x2: \"19\",\n  y2: \"12\"\n}, null, -1);\nconst _hoisted_4$3 = /* @__PURE__ */ createElementVNode(\"line\", {\n  x1: \"5\",\n  y1: \"12\",\n  x2: \"11\",\n  y2: \"18\"\n}, null, -1);\nconst _hoisted_5$3 = /* @__PURE__ */ createElementVNode(\"line\", {\n  x1: \"5\",\n  y1: \"12\",\n  x2: \"11\",\n  y2: \"6\"\n}, null, -1);\nconst _hoisted_6$1 = [\n  _hoisted_2$4,\n  _hoisted_3$3,\n  _hoisted_4$3,\n  _hoisted_5$3\n];\nfunction _sfc_render$7(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$7, _hoisted_6$1);\n}\nconst ArrowLeft = /* @__PURE__ */ _export_sfc(_sfc_main$7, [[\"render\", _sfc_render$7]]);\nconst _sfc_main$6 = {};\nconst _hoisted_1$6 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$3 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$2 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2\" }, null, -1);\nconst _hoisted_4$2 = /* @__PURE__ */ createElementVNode(\"rect\", {\n  x: \"9\",\n  y: \"3\",\n  width: \"6\",\n  height: \"4\",\n  rx: \"2\"\n}, null, -1);\nconst _hoisted_5$2 = [\n  _hoisted_2$3,\n  _hoisted_3$2,\n  _hoisted_4$2\n];\nfunction _sfc_render$6(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$6, _hoisted_5$2);\n}\nconst Clipboard = /* @__PURE__ */ _export_sfc(_sfc_main$6, [[\"render\", _sfc_render$6]]);\nconst _sfc_main$5 = {};\nconst _hoisted_1$5 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$2 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$1 = /* @__PURE__ */ createElementVNode(\"rect\", {\n  x: \"8\",\n  y: \"8\",\n  width: \"12\",\n  height: \"12\",\n  rx: \"2\"\n}, null, -1);\nconst _hoisted_4$1 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2\" }, null, -1);\nconst _hoisted_5$1 = [\n  _hoisted_2$2,\n  _hoisted_3$1,\n  _hoisted_4$1\n];\nfunction _sfc_render$5(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$5, _hoisted_5$1);\n}\nconst Copy = /* @__PURE__ */ _export_sfc(_sfc_main$5, [[\"render\", _sfc_render$5]]);\nconst _sfc_main$4 = {};\nconst _hoisted_1$4 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$1 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2\" }, null, -1);\nconst _hoisted_4 = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"14\",\n  r: \"2\"\n}, null, -1);\nconst _hoisted_5 = /* @__PURE__ */ createElementVNode(\"polyline\", { points: \"14 4 14 8 8 8 8 4\" }, null, -1);\nconst _hoisted_6 = [\n  _hoisted_2$1,\n  _hoisted_3,\n  _hoisted_4,\n  _hoisted_5\n];\nfunction _sfc_render$4(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$4, _hoisted_6);\n}\nconst DeviceFloppy = /* @__PURE__ */ _export_sfc(_sfc_main$4, [[\"render\", _sfc_render$4]]);\nconst _sfc_main$3 = {};\nconst _hoisted_1$3 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createStaticVNode('<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M10 3h4v4h-4z\"></path><path d=\"M3 17h4v4h-4z\"></path><path d=\"M17 17h4v4h-4z\"></path><path d=\"M7 17l5 -4l5 4\"></path><line x1=\"12\" y1=\"7\" x2=\"12\" y2=\"13\"></line>', 6);\nconst _hoisted_8 = [\n  _hoisted_2\n];\nfunction _sfc_render$3(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$3, _hoisted_8);\n}\nconst Hierarchy2 = /* @__PURE__ */ _export_sfc(_sfc_main$3, [[\"render\", _sfc_render$3]]);\nconst _sfc_main$2 = defineComponent({\n  props: {\n    command: {\n      type: String,\n      required: true\n    },\n    title: {\n      type: String,\n      required: true\n    },\n    icon: {\n      type: Object,\n      required: false,\n      default: void 0\n    }\n  },\n  setup() {\n    const { viewModel } = useViewModel();\n    return { viewModel };\n  }\n});\nconst _hoisted_1$2 = [\"disabled\", \"title\"];\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"button\", {\n    class: \"baklava-toolbar-entry baklava-toolbar-button\",\n    disabled: !_ctx.viewModel.commandHandler.canExecuteCommand(_ctx.command),\n    title: _ctx.title,\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.viewModel.commandHandler.executeCommand(_ctx.command))\n  }, [\n    _ctx.icon ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.icon), { key: 0 })) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [\n      createTextVNode(toDisplayString(_ctx.title), 1)\n    ], 64))\n  ], 8, _hoisted_1$2);\n}\nconst ToolbarButton = /* @__PURE__ */ _export_sfc(_sfc_main$2, [[\"render\", _sfc_render$2]]);\nconst _sfc_main$1 = defineComponent({\n  components: { ToolbarButton },\n  setup() {\n    const { viewModel } = useViewModel();\n    const isSubgraph = computed(() => viewModel.value.displayedGraph !== viewModel.value.editor.graph);\n    const commands = [\n      { command: COPY_COMMAND, title: \"Copy\", icon: Copy },\n      { command: PASTE_COMMAND, title: \"Paste\", icon: Clipboard },\n      { command: UNDO_COMMAND, title: \"Undo\", icon: ArrowBackUp },\n      { command: REDO_COMMAND, title: \"Redo\", icon: ArrowForwardUp },\n      { command: CREATE_SUBGRAPH_COMMAND, title: \"Create Subgraph\", icon: Hierarchy2 }\n    ];\n    const subgraphCommands = [\n      { command: SAVE_SUBGRAPH_COMMAND, title: \"Save Subgraph\", icon: DeviceFloppy },\n      { command: SWITCH_TO_MAIN_GRAPH_COMMAND, title: \"Back to Main Graph\", icon: ArrowLeft }\n    ];\n    return { isSubgraph, commands, subgraphCommands };\n  }\n});\nconst _hoisted_1$1 = { class: \"baklava-toolbar\" };\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_toolbar_button = resolveComponent(\"toolbar-button\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, [\n    (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.commands, (c) => {\n      return openBlock(), createBlock(_component_toolbar_button, {\n        key: c.command,\n        command: c.command,\n        title: c.title,\n        icon: c.icon\n      }, null, 8, [\"command\", \"title\", \"icon\"]);\n    }), 128)),\n    _ctx.isSubgraph ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(_ctx.subgraphCommands, (c) => {\n      return openBlock(), createBlock(_component_toolbar_button, {\n        key: c.command,\n        command: c.command,\n        title: c.title,\n        icon: c.icon\n      }, null, 8, [\"command\", \"title\", \"icon\"]);\n    }), 128)) : createCommentVNode(\"\", true)\n  ]);\n}\nconst Toolbar = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render$1]]);\nconst _sfc_main = defineComponent({\n  components: { Background, Node: _sfc_main$q, ConnectionWrapper, TemporaryConnection, Sidebar, Minimap, NodePalette, Toolbar },\n  props: {\n    viewModel: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const token = Symbol(\"EditorToken\");\n    const viewModelRef2 = toRef(props, \"viewModel\");\n    providePlugin(viewModelRef2);\n    const el = ref(null);\n    provide(\"editorEl\", el);\n    const nodes = computed(() => props.viewModel.displayedGraph.nodes);\n    const connections = computed(() => props.viewModel.displayedGraph.connections);\n    const selectedNodes = computed(() => props.viewModel.displayedGraph.selectedNodes);\n    const panZoom = usePanZoom();\n    const temporaryConnection = useTemporaryConnection();\n    const nodeContainerStyle = computed(() => ({\n      ...panZoom.styles.value\n    }));\n    const counter = ref(0);\n    props.viewModel.editor.hooks.load.subscribe(token, (s) => {\n      counter.value++;\n      return s;\n    });\n    const onPointerMove = (ev) => {\n      panZoom.onPointerMove(ev);\n      temporaryConnection.onMouseMove(ev);\n    };\n    const onPointerDown = (ev) => {\n      if (ev.button === 0) {\n        if (ev.target === el.value) {\n          unselectAllNodes();\n          panZoom.onPointerDown(ev);\n        }\n        temporaryConnection.onMouseDown();\n      }\n    };\n    const onPointerUp = (ev) => {\n      panZoom.onPointerUp(ev);\n      temporaryConnection.onMouseUp();\n    };\n    const keyDown = (ev) => {\n      if (ev.key === \"Tab\") {\n        ev.preventDefault();\n      }\n      props.viewModel.commandHandler.handleKeyDown(ev);\n    };\n    const keyUp = (ev) => {\n      props.viewModel.commandHandler.handleKeyUp(ev);\n    };\n    const selectNode = (node) => {\n      if (!props.viewModel.commandHandler.pressedKeys.includes(\"Control\")) {\n        unselectAllNodes();\n      }\n      props.viewModel.displayedGraph.selectedNodes.push(node);\n    };\n    const unselectAllNodes = () => {\n      props.viewModel.displayedGraph.selectedNodes = [];\n    };\n    return {\n      el,\n      counter,\n      nodes,\n      connections,\n      selectedNodes,\n      nodeContainerStyle,\n      onPointerMove,\n      onPointerDown,\n      onPointerUp,\n      keyDown,\n      keyUp,\n      selectNode,\n      temporaryConnection: temporaryConnection.temporaryConnection,\n      mouseWheel: panZoom.onMouseWheel,\n      dragging: panZoom.dragging\n    };\n  }\n});\nconst _hoisted_1 = { class: \"connections-container\" };\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_background = resolveComponent(\"background\");\n  const _component_toolbar = resolveComponent(\"toolbar\");\n  const _component_node_palette = resolveComponent(\"node-palette\");\n  const _component_connection_wrapper = resolveComponent(\"connection-wrapper\");\n  const _component_temporary_connection = resolveComponent(\"temporary-connection\");\n  const _component_node = resolveComponent(\"node\");\n  const _component_sidebar = resolveComponent(\"sidebar\");\n  const _component_minimap = resolveComponent(\"minimap\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    tabindex: \"-1\",\n    class: normalizeClass([\"baklava-editor\", {\n      \"baklava-ignore-mouse\": !!_ctx.temporaryConnection || _ctx.dragging,\n      \"--temporary-connection\": !!_ctx.temporaryConnection\n    }]),\n    onPointermove: _cache[0] || (_cache[0] = withModifiers((...args) => _ctx.onPointerMove && _ctx.onPointerMove(...args), [\"self\"])),\n    onPointerdown: _cache[1] || (_cache[1] = (...args) => _ctx.onPointerDown && _ctx.onPointerDown(...args)),\n    onPointerup: _cache[2] || (_cache[2] = (...args) => _ctx.onPointerUp && _ctx.onPointerUp(...args)),\n    onWheel: _cache[3] || (_cache[3] = withModifiers((...args) => _ctx.mouseWheel && _ctx.mouseWheel(...args), [\"self\"])),\n    onKeydown: _cache[4] || (_cache[4] = (...args) => _ctx.keyDown && _ctx.keyDown(...args)),\n    onKeyup: _cache[5] || (_cache[5] = (...args) => _ctx.keyUp && _ctx.keyUp(...args))\n  }, [\n    renderSlot(_ctx.$slots, \"background\", {}, () => [\n      createVNode(_component_background)\n    ]),\n    renderSlot(_ctx.$slots, \"toolbar\", {}, () => [\n      createVNode(_component_toolbar)\n    ]),\n    renderSlot(_ctx.$slots, \"palette\", {}, () => [\n      createVNode(_component_node_palette)\n    ]),\n    (openBlock(), createElementBlock(\"svg\", _hoisted_1, [\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.connections, (connection) => {\n        return openBlock(), createElementBlock(\"g\", {\n          key: connection.id + _ctx.counter.toString()\n        }, [\n          renderSlot(_ctx.$slots, \"connection\", { connection }, () => [\n            createVNode(_component_connection_wrapper, { connection }, null, 8, [\"connection\"])\n          ])\n        ]);\n      }), 128)),\n      renderSlot(_ctx.$slots, \"temporaryConnection\", { temporaryConnection: _ctx.temporaryConnection }, () => [\n        _ctx.temporaryConnection ? (openBlock(), createBlock(_component_temporary_connection, {\n          key: 0,\n          connection: _ctx.temporaryConnection\n        }, null, 8, [\"connection\"])) : createCommentVNode(\"\", true)\n      ])\n    ])),\n    createElementVNode(\"div\", {\n      class: \"node-container\",\n      style: normalizeStyle(_ctx.nodeContainerStyle)\n    }, [\n      createVNode(TransitionGroup, { name: \"fade\" }, {\n        default: withCtx(() => [\n          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.nodes, (node) => {\n            return renderSlot(_ctx.$slots, \"node\", {\n              node,\n              selected: _ctx.selectedNodes.includes(node),\n              onSelect: ($event) => _ctx.selectNode(node)\n            }, () => [\n              (openBlock(), createBlock(_component_node, {\n                key: node.id + _ctx.counter.toString(),\n                node,\n                selected: _ctx.selectedNodes.includes(node),\n                onSelect: ($event) => _ctx.selectNode(node)\n              }, null, 8, [\"node\", \"selected\", \"onSelect\"]))\n            ]);\n          }), 256))\n        ]),\n        _: 3\n      })\n    ], 4),\n    renderSlot(_ctx.$slots, \"sidebar\", {}, () => [\n      createVNode(_component_sidebar)\n    ]),\n    renderSlot(_ctx.$slots, \"minimap\", {}, () => [\n      _ctx.viewModel.settings.enableMinimap ? (openBlock(), createBlock(_component_minimap, { key: 0 })) : createCommentVNode(\"\", true)\n    ])\n  ], 34);\n}\nconst Editor = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nfunction useHotkeyHandler(executeCommand) {\n  const pressedKeys = ref([]);\n  const handlers = ref([]);\n  const handleKeyDown = (ev) => {\n    if (!pressedKeys.value.includes(ev.key)) {\n      pressedKeys.value.push(ev.key);\n    }\n    handlers.value.forEach((h) => {\n      if (h.keys.every((k) => pressedKeys.value.includes(k))) {\n        executeCommand(h.commandName);\n      }\n    });\n  };\n  const handleKeyUp = (ev) => {\n    const index = pressedKeys.value.indexOf(ev.key);\n    if (index >= 0) {\n      pressedKeys.value.splice(index, 1);\n    }\n  };\n  const registerHotkey = (keys2, commandName) => {\n    handlers.value.push({ keys: keys2, commandName });\n  };\n  return { pressedKeys, handleKeyDown, handleKeyUp, registerHotkey };\n}\nconst useCommandHandler = () => {\n  const commands = ref(/* @__PURE__ */ new Map());\n  const registerCommand = (name, command) => {\n    if (commands.value.has(name)) {\n      throw new Error(`Command \"${name}\" already exists`);\n    }\n    commands.value.set(name, command);\n  };\n  const executeCommand = (name, throwOnNonexisting = false, ...args) => {\n    if (!commands.value.has(name)) {\n      if (throwOnNonexisting) {\n        throw new Error(`[CommandHandler] Command ${name} not registered`);\n      } else {\n        return;\n      }\n    }\n    return commands.value.get(name).execute(...args);\n  };\n  const canExecuteCommand = (name, throwOnNonexisting = false, ...args) => {\n    if (!commands.value.has(name)) {\n      if (throwOnNonexisting) {\n        throw new Error(`[CommandHandler] Command ${name} not registered`);\n      } else {\n        return false;\n      }\n    }\n    return commands.value.get(name).canExecute(args);\n  };\n  const hotkeyHandler = useHotkeyHandler(executeCommand);\n  return reactive({ registerCommand, executeCommand, canExecuteCommand, ...hotkeyHandler });\n};\nconst isTemplate = (g) => !(g instanceof Graph);\nfunction useSwitchGraph(editor, displayedGraph) {\n  const switchGraph = (newGraph) => {\n    let newGraphInstance;\n    if (!isTemplate(newGraph)) {\n      if (newGraph !== editor.value.graph) {\n        throw new Error(\n          \"Can only switch using 'Graph' instance when it is the root graph. Otherwise a 'GraphTemplate' must be used.\"\n        );\n      }\n      newGraphInstance = newGraph;\n    } else {\n      newGraphInstance = new Graph(editor.value);\n      newGraph.createGraph(newGraphInstance);\n      newGraphInstance.inputs.forEach((input) => {\n        const node = new SubgraphInputNode();\n        node.inputs.name.value = input.name;\n        node.graphInterfaceId = input.id;\n        newGraphInstance.addNode(node);\n        const targetInterface = newGraphInstance.findNodeInterface(input.nodeInterfaceId);\n        if (!targetInterface) {\n          console.warn(`Could not find target interface ${input.nodeInterfaceId} for subgraph input node`);\n          return;\n        }\n        newGraphInstance.addConnection(node.outputs.placeholder, targetInterface);\n      });\n      newGraphInstance.outputs.forEach((output) => {\n        const node = new SubgraphOutputNode();\n        node.inputs.name.value = output.name;\n        node.graphInterfaceId = output.id;\n        newGraphInstance.addNode(node);\n        const targetInterface = newGraphInstance.findNodeInterface(output.nodeInterfaceId);\n        if (!targetInterface) {\n          console.warn(`Could not find target interface ${output.nodeInterfaceId} for subgraph input node`);\n          return;\n        }\n        newGraphInstance.addConnection(targetInterface, node.inputs.placeholder);\n      });\n    }\n    if (displayedGraph.value && displayedGraph.value !== editor.value.graph) {\n      displayedGraph.value.destroy();\n    }\n    newGraphInstance.panning = newGraphInstance.panning ?? newGraph.panning ?? { x: 0, y: 0 };\n    newGraphInstance.scaling = newGraphInstance.scaling ?? newGraph.scaling ?? 1;\n    newGraphInstance.selectedNodes = newGraphInstance.selectedNodes ?? [];\n    newGraphInstance.sidebar = newGraphInstance.sidebar ?? { visible: false, nodeId: \"\", optionName: \"\" };\n    displayedGraph.value = newGraphInstance;\n  };\n  return { switchGraph };\n}\nfunction setViewNodeProperties(node) {\n  node.position = node.position ?? { x: 0, y: 0 };\n  node.disablePointerEvents = false;\n  node.twoColumn = node.twoColumn ?? false;\n  node.width = node.width ?? 200;\n}\nfunction useBaklava(existingEditor) {\n  const editor = ref(existingEditor ?? new Editor$1());\n  const token = Symbol(\"ViewModelToken\");\n  const _displayedGraph = ref(null);\n  const displayedGraph = shallowReadonly(_displayedGraph);\n  const { switchGraph } = useSwitchGraph(editor, _displayedGraph);\n  const isSubgraph = computed(() => displayedGraph.value && displayedGraph.value !== editor.value.graph);\n  const settings = reactive({\n    useStraightConnections: false,\n    enableMinimap: false,\n    background: {\n      gridSize: 100,\n      gridDivision: 5,\n      subGridVisibleThreshold: 0.6\n    }\n  });\n  const commandHandler = useCommandHandler();\n  const history = useHistory(displayedGraph, commandHandler);\n  const clipboard = useClipboard(displayedGraph, editor, commandHandler);\n  const hooks = {\n    renderNode: new SequentialHook(null),\n    renderInterface: new SequentialHook(null)\n  };\n  registerGraphCommands(displayedGraph, commandHandler, switchGraph);\n  registerSidebarCommands(displayedGraph, commandHandler);\n  watch(\n    editor,\n    (newValue, oldValue) => {\n      if (oldValue) {\n        oldValue.events.registerGraph.unsubscribe(token);\n        oldValue.graphEvents.beforeAddNode.unsubscribe(token);\n        newValue.nodeHooks.beforeLoad.unsubscribe(token);\n        newValue.nodeHooks.afterSave.unsubscribe(token);\n        newValue.graphTemplateHooks.beforeLoad.unsubscribe(token);\n        newValue.graphTemplateHooks.afterSave.unsubscribe(token);\n      }\n      if (newValue) {\n        newValue.nodeHooks.beforeLoad.subscribe(token, (state, node) => {\n          node.position = state.position ?? { x: 0, y: 0 };\n          node.width = state.width ?? 200;\n          node.twoColumn = state.twoColumn ?? false;\n          return state;\n        });\n        newValue.nodeHooks.afterSave.subscribe(token, (state, node) => {\n          state.position = node.position;\n          state.width = node.width;\n          state.twoColumn = node.twoColumn;\n          return state;\n        });\n        newValue.graphTemplateHooks.beforeLoad.subscribe(token, (state, template) => {\n          template.panning = state.panning;\n          template.scaling = state.scaling;\n          return state;\n        });\n        newValue.graphTemplateHooks.afterSave.subscribe(token, (state, template) => {\n          state.panning = template.panning;\n          state.scaling = template.scaling;\n          return state;\n        });\n        newValue.graphEvents.beforeAddNode.subscribe(token, (node) => setViewNodeProperties(node));\n        editor.value.registerNodeType(SubgraphInputNode, { category: \"Subgraphs\" });\n        editor.value.registerNodeType(SubgraphOutputNode, { category: \"Subgraphs\" });\n        switchGraph(newValue.graph);\n      }\n    },\n    { immediate: true }\n  );\n  return reactive({\n    editor,\n    displayedGraph,\n    isSubgraph,\n    settings,\n    commandHandler,\n    history,\n    clipboard,\n    hooks,\n    switchGraph\n  });\n}\nconst components = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  Connection: ConnectionView,\n  ConnectionWrapper,\n  TemporaryConnection,\n  Node: _sfc_main$q,\n  NodeInterface,\n  ContextMenu,\n  Minimap,\n  Sidebar\n}, Symbol.toStringTag, { value: \"Module\" }));\nexport {\n  ButtonInterface,\n  ButtonInterfaceComponent,\n  CheckboxInterface,\n  CheckboxInterfaceComponent,\n  commandList as Commands,\n  components as Components,\n  Editor as EditorComponent,\n  IntegerInterface,\n  IntegerInterfaceComponent,\n  NumberInterface,\n  NumberInterfaceComponent,\n  SelectInterface,\n  SelectInterfaceComponent,\n  SliderInterface,\n  SliderInterfaceComponent,\n  TextInputInterface,\n  TextInputInterfaceComponent,\n  TextInterface,\n  providePlugin,\n  useBaklava,\n  useCommandHandler,\n  useDragMove,\n  useGraph,\n  useTransform,\n  useViewModel\n};\n"],"names":["BaklavaEvent","constructor","entity","super","this","emit","data","listeners","forEach","l","PreventableBaklavaEvent","prevented","prevent","Array","from","values","DynamicSequentialHook","execute","currentValue","callback","SequentialHook","ParallelHook","results","push","createProxy","token","Symbol","Map","targets","Set","register","key","subscribable","registerProxy","_a","_b","get","addTarget","target","add","keys","removeTarget","unregisterProxy","delete","destroy","t","clear","Proxy","startsWith","has","set","addSubscribable","Subscribable","listenerMap","_listeners","proxyMap","proxies","concat","flatMap","getListeners","subscribe","console","warn","unsubscribe","i","indexOf","splice","viewModelRef","useViewModel","Error","viewModel","useGraph","graph","value","switchGraph","useDragMove","positionRef","draggingStartPoint","draggingStartPosition","dragging","onPointerDown","ev","x","pageX","y","pageY","onPointerMove","dx","dy","scaling","onPointerUp","useTransform","transform","panning","TemporaryConnectionState","TemporaryConnectionState2","_export_sfc","sfc","props","__vccOpts","val","Background","setup","styles","config","settings","background","positionLeft","positionTop","size","gridSize","subSize","gridDivision","backgroundPosition","backgroundSize","subGridVisibleThreshold","_ctx","_cache","$props","$setup","$data","$options","class","style","isClient","window","isString","noop","navigator","userAgent","test","__defProp$7","Object","defineProperty","__defProps$5","defineProperties","__getOwnPropDescs$5","getOwnPropertyDescriptors","__getOwnPropSymbols$9","getOwnPropertySymbols","__hasOwnProp$9","prototype","hasOwnProperty","__propIsEnum$9","propertyIsEnumerable","__defNormalProp$7","obj","enumerable","configurable","writable","__spreadValues$7","a","b","prop","call","__spreadProps$5","unrefElement","elRef","_a2","plain","r","$el","defaultWindow","useEventListener","args","events","options","isArray","cleanups","cleanup","fn","length","stopWatch","el","event","map","listener","addEventListener","removeEventListener","immediate","flush","stop","onClickOutside","handler","window2","ignore","capture","detectIframe","fallback","shouldListen","shouldIgnore","some","target2","document","querySelectorAll","composedPath","includes","clearTimeout","detail","passive","e","button","path","setTimeout","activeElement","tagName","contains","filter","Boolean","location","_global","globalThis","global","self","globalKey","__defProp$5","__defProps$1","__getOwnPropDescs$1","__getOwnPropSymbols$5","__hasOwnProp$5","__propIsEnum$5","__defNormalProp$5","defaultState","pointerId","pressure","tiltX","tiltY","width","height","twist","pointerType","SwipeDirection","SwipeDirection2","__defProp","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","linear","arg","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","_sfc_main$t","modelValue","type","default","items","required","Number","isNested","isFlipped","flippable","emits","activeMenuResetTimeout","activeMenu","rootIsFlipped","flippedX","flippedY","s","top","left","classes","itemsWithHoverProperty","hover","_c","_d","parentWidth","parentElement","offsetWidth","parentHeight","offsetHeight","onClick","item","submenu","onChildClick","onMouseEnter","index","onMouseLeave","_hoisted_1$p","_hoisted_2$j","_hoisted_3$f","_hoisted_5$7","viewBox","d","stroke","fill","ContextMenu","_component_context_menu","name","ref","isDivider","disabled","onMouseenter","$event","onMouseleave","label","_","_sfc_main$s","_hoisted_1$o","xmlns","_hoisted_6$4","cx","cy","VerticalDots","_sfc_main$r","node","intf","hoveredOver","isConnected","connectionCount","isInput","showComponent","component","port","onRender","hooks","renderInterface","startHover","endHover","openSidebar","sidebar","displayedGraph","nodeId","id","optionName","visible","_hoisted_1$n","_hoisted_2$h","NodeInterface","onPointerover","onPointerout","onOpenSidebar","_hoisted_1$m","_hoisted_2$g","_hoisted_3$d","_hoisted_4$b","_hoisted_5$5","_hoisted_6$3","_hoisted_7$1","_hoisted_8$1","_sfc_main$q","__name","selected","__props","dragMove","renaming","tempName","renameInputEl","showContextMenu","contextMenuItems","twoColumn","position","displayedInputs","inputs","ni","hidden","displayedOutputs","outputs","select","startDrag","stopDrag","openContextMenu","onContextMenuClick","async","action","removeNode","title","focus","template","doneRenaming","renderNode","ref_key","onPointerdown","placeholder","onBlur","onKeydown","output","input","_sfc_main$p","x1","y1","x2","y2","state","NONE","isTemporary","tx1","ty1","tx2","ty2","useStraightConnections","Math","abs","ALLOWED","FORBIDDEN","_hoisted_1$l","ConnectionView","getDomElements","interfaceDOM","getElementById","portDOM","getElementsByClassName","closest","interface","ConnectionWrapper","components","connection","resizeObserver","isInDanger","fromNodePosition","findNodeById","toNodePosition","to","getPortCoordinates2","resolved","offsetLeft","clientWidth","offsetTop","clientHeight","updateCoords","ResizeObserver","observe","disconnect","deep","_component_connection_view","getPortCoordinates","TemporaryConnection","status","start","end","mx","my","_sfc_main$m","nodes","find","displayedInterfaces","displayInSidebar","onMouseMove","maxwidth","getBoundingClientRect","movementX","startResize","once","close","_hoisted_1$k","_hoisted_2$f","Sidebar","onMousedown","tabindex","Minimap","canvas","showViewBounds","ctx","bounds","transformCoordinates","origX","origY","getNodeColor","domElement","content","querySelector","contentColor","getComputedColor","nodeColor","c","getComputedStyle","backgroundColor","getViewBounds","mousemove","thisX","offsetX","thisY","offsetY","viewBounds","mouseup","getContext","imageSmoothingQuality","nodeCoords","nodeDomElements","n","posX","posY","newBounds","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","nc","clearRect","strokeStyle","connections","origX1","origY1","origX2","origY2","beginPath","moveTo","lineTo","bezierCurveTo","entries","fillStyle","rect","fillRect","updateCanvas","mousedown","mouseenter","mouseleave","onMousemove","onMouseup","_sfc_main$k","String","hasContextMenu","graphTemplateId","substring","graphTemplate","editor","graphTemplates","gt","removeGraphTemplate","_hoisted_1$j","_hoisted_2$e","_hoisted_3$c","_hoisted_4$a","PaletteEntry","_component_vertical_dots","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","byteToHex","toString","slice","native","randomUUID","v4","buf","offset","rnds","random","arr","toLowerCase","unsafeStringify","_sfc_main$j","_hoisted_1$i","ButtonInterfaceComponent","ButtonInterface","setPort","_sfc_main$i","_hoisted_1$h","_hoisted_2$d","_hoisted_3$b","CheckboxInterfaceComponent","CheckboxInterface","arguments","BaseNumericInterface","min","max","validate","v","useBaseNumericInterface","precision","inputEl","editMode","invalid","tempValue","stringRepresentation","toFixed","toExponential","MAX_STRING_LENGTH","isNaN","isValidator","setValue","newValue","enterEditMode","leaveEditMode","parseFloat","_sfc_main$h","_hoisted_1$g","_hoisted_3$a","points","Arrow","_sfc_main$g","baseNumericInterface","increment","decrement","_hoisted_1$f","_hoisted_2$b","_hoisted_3$9","_hoisted_4$9","IntegerInterfaceComponent","_component_i_arrow","IntegerInterface","isInteger","_sfc_main$f","_hoisted_1$e","_hoisted_2$a","_hoisted_3$8","_hoisted_4$8","NumberInterfaceComponent","NumberInterface","_sfc_main$e","open","selectedItem","selectedText","text","setSelected","_hoisted_1$d","_hoisted_2$9","_hoisted_3$7","_hoisted_4$7","_hoisted_5$4","_hoisted_6$2","_hoisted_7","SelectInterfaceComponent","SelectInterface","_sfc_main$d","didSlide","isMouseDown","percentage","_hoisted_1$c","_hoisted_2$8","_hoisted_3$6","_hoisted_4$6","SliderInterfaceComponent","onPointerup","onPointermove","onPointerleave","TextInterfaceComponent","TextInterface","_sfc_main$b","v2","_hoisted_1$b","TextInputInterfaceComponent","TextInputInterface","SUBGRAPH_INPUT_NODE_TYPE","SUBGRAPH_OUTPUT_NODE_TYPE","SubgraphInputNode","onCreate","graphInterfaceId","SubgraphOutputNode","checkRecursion","currentGraph","graphNodeType","_sfc_main$a","mouseX","mouseY","isInside","initialValue","assign","pointerTypes","keys2","omitUndefined","reduce","k","objectPick","__spreadValues$5","objectRef","result","copy","newObject","setPrototypeOf","toRefs","usePointer","editorEl","draggedNode","categories","nodeTypeEntries","nodeTypes","categoryNames","category","categories2","nodeTypesInCategory","nt","fromEntries","sort","draggedNodeStyles","onDragStart","nodeInformation","onDragEnd","instance","addNode","_hoisted_1$a","_hoisted_2$7","NodePalette","_component_PaletteEntry","SAVE_SUBGRAPH_COMMAND","CREATE_SUBGRAPH_COMMAND","IGNORE_NODE_TYPES","DELETE_NODES_COMMAND","SWITCH_TO_MAIN_GRAPH_COMMAND","NodeStep","nodeState","undo","redo","nodeType","load","save","ConnectionStep","connectionId","connectionState","removeConnection","addConnection","fromIntf","findNodeInterface","toIntf","TransactionStep","steps","UNDO_COMMAND","REDO_COMMAND","START_TRANSACTION_COMMAND","COMMIT_TRANSACTION_COMMAND","COPY_COMMAND","PASTE_COMMAND","CLEAR_CLIPBOARD_COMMAND","OPEN_SIDEBAR_COMMAND","toStringTag","_sfc_main$9","_hoisted_1$9","_hoisted_4$5","ArrowBackUp","_sfc_main$8","_hoisted_1$8","_hoisted_4$4","ArrowForwardUp","_sfc_main$7","_hoisted_1$7","_hoisted_6$1","ArrowLeft","_sfc_main$6","_hoisted_1$6","_hoisted_5$2","rx","Clipboard","_sfc_main$5","_hoisted_1$5","_hoisted_5$1","Copy","_sfc_main$4","_hoisted_1$4","_hoisted_6","DeviceFloppy","_sfc_main$3","_hoisted_1$3","_hoisted_8","Hierarchy2","_sfc_main$2","command","icon","_hoisted_1$2","ToolbarButton","commandHandler","canExecuteCommand","executeCommand","_sfc_main$1","isSubgraph","commands","subgraphCommands","_hoisted_1$1","Toolbar","_component_toolbar_button","_sfc_main","Node","viewModelRef2","selectedNodes","panZoom","pointerCache","prevDiff","midpoint","applyZoom","centerX","centerY","newScale","currentPoint","newPoint","diff","getCoordsFromCache","ax","clientX","ay","clientY","bx","by","curDiff","sqrt","p","onMouseWheel","preventDefault","scrollAmount","deltaY","deltaMode","usePanZoom","temporaryConnection","hoveringOver","checkConnectionResult","checkConnection","connectionAllowed","ids","connectionsInDanger","onMouseDown","onMouseUp","useTemporaryConnection","nodeContainerStyle","counter","unselectAllNodes","keyDown","handleKeyDown","keyUp","handleKeyUp","selectNode","pressedKeys","mouseWheel","_hoisted_1","Editor","_component_background","_component_toolbar","_component_node_palette","_component_connection_wrapper","_component_temporary_connection","_component_node","_component_sidebar","_component_minimap","onWheel","onKeyup","$slots","onSelect","enableMinimap","useCommandHandler","throwOnNonexisting","hotkeyHandler","handlers","h","every","commandName","registerHotkey","useHotkeyHandler","registerCommand","canExecute","isTemplate","g","useBaklava","existingEditor","_displayedGraph","newGraph","newGraphInstance","createGraph","targetInterface","nodeInterfaceId","useSwitchGraph","history","maxSteps","changeBySelf","currentIndex","activeTransaction","transactionSteps","addStep","step","shift","canUndo","canRedo","oldGraph","conn","useHistory","clipboard","nodeBuffer","connectionBuffer","isEmpty","findInterface","io","intf2","interfacesOfSelectedNodes","JSON","stringify","idmap","parsedNodeBuffer","parse","parsedConnectionBuffer","newNodes","newConnections","copiedNode","generatedId","tapInterfaces","intfs","intfState","newIntfId","beforeLoad","ns","newConnection","useClipboard","registerDeleteNodesCommand","selectedNodesInputs","selectedNodesOutputs","inputConnections","outputConnections","innerConnections","inputInterfaces","outputInterfaces","interfaceIdMap","graphInputs","newId","graphOutputs","subgraphTemplate","addGraphTemplate","averageX","round","averageY","registerCreateSubgraphCommand","interfaceConnections","inputNodes","outputNodes","update","registerSaveSubgraphCommand","registerSwitchToMainGraphCommand","registerGraphCommands","registerOpenSidebarCommand","registerSidebarCommands","oldValue","registerGraph","graphEvents","beforeAddNode","nodeHooks","afterSave","graphTemplateHooks","disablePointerEvents","setViewNodeProperties","registerNodeType","freeze","__proto__","Connection"],"sourceRoot":""}